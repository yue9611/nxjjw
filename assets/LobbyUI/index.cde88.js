window.__require=function t(e,n,o){function i(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!s&&p)return p(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var h=n[r]={exports:{}};e[r][0].call(h.exports,function(t){return i(e[r][1][t]||t)},h,h.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({ChooseLevelUI:[function(t,e,n){"use strict";cc._RF.push(e,"5c5621S2uZBy5v/B3HCjZ1I","ChooseLevelUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/yyComponent"),s=t("../../Script/Common/PlayerData"),c=t("../../Script/GameSpecial/GameEventType"),p=t("../../Script/Common/Action3dManager"),h=t("../../Script/GameSpecial/GlobalEnum"),u=cc._decorator,l=u.ccclass,d=u.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.plane=null,e.itemLayer=null,e.levelItemSprites=[],e.passItem=null,e.clockItem=null,e.levelLayer=null,e.levelLabels=[],e.countPerPage=16,e.curPage=0,e.maxPage=62,e.btnPrePage=null,e.btnNextPage=null,e.unlockEffectMask=null,e.unlockGuang=null,e}return i(e,t),e.prototype.init=function(){this.initUnlockEffect(),this.initComponents(),this.initItems(),this.initPage()},e.prototype.reset=function(){this.resetUnlockEffect()},e.prototype.show=function(){this.node.active=!0;var t=s.default.getData("gameData.curLevel");this.curPage=void 0===t?0:Math.floor((t-1)/this.countPerPage),this.showRecords(this.curPage),this.updateBtnState(),this.playPlane()},e.prototype.playPlane=function(){var t=0,e=this.plane.getComponent(cc.Widget);e&&(t=e.bottom,e.enabled=!1);var n,o=this.plane.height*this.plane.anchorY;n=e?-this.node.height*this.node.anchorY+t+o:this.node.height*(1-this.node.anchorY)-this.plane.height*(1-this.plane.anchorY),this.plane.setPosition(0,o+this.node.height*(1-this.node.anchorY),0);var i=p.default.moveTo(1,0,n,0);i.easing(p.default.easeElasticOut(.35)),p.default.getMng(p.ActionMngType.UI).runAction(this.plane,i)},e.prototype.initItems=function(){var t=this;this.countPerPage=this.itemLayer.childrenCount,this.levelItemSprites=[];for(var e=function(e){n.itemLayer.children[e].on("touchend",function(){t.onChooseLevel(e)},n),n.levelItemSprites.push(n.itemLayer.children[e].getComponent(cc.Sprite))},n=this,o=0;o<this.countPerPage;++o)e(o);for(this.levelLabels=[],o=0;o<this.countPerPage;++o)this.levelLabels.push(this.levelLayer.children[o].getComponent(cc.Label))},e.prototype.onChooseLevel=function(t){this.emit(c.EventType.AudioEvent.playClickBtn);var e=this.curPage*this.countPerPage+t+1;e<=s.default.getData("gameData.curLevel")&&this.emit(c.EventType.DirectorEvent.enterChosedLevel,e)},e.prototype.initPage=function(){var t=this.itemLayer.childrenCount;this.maxPage=Math.floor(1e3/t)},e.prototype.showRecords=function(t){void 0===t&&(t=this.curPage);for(var e=s.default.getData("gameData.curLevel"),n=t*this.countPerPage+1,o=0;o<this.countPerPage;++o){var i=n+o;i>e?(this.levelItemSprites[o].spriteFrame=this.clockItem,this.levelLabels[o].string=""):(this.levelItemSprites[o].spriteFrame=this.passItem,this.levelLabels[o].string=i.toString())}},e.prototype.updateBtnState=function(){this.btnPrePage.interactable=this.curPage>0,this.btnNextPage.interactable=this.curPage<this.maxPage},e.prototype.onBtnPrePage=function(){this.emit(c.EventType.AudioEvent.playClickBtn),this.curPage<=0||(this.curPage-=1,this.showRecords(this.curPage),this.updateBtnState())},e.prototype.onBtnNextPage=function(){this.emit(c.EventType.AudioEvent.playClickBtn),this.curPage>=this.maxPage||(this.curPage+=1,this.showRecords(this.curPage),this.updateBtnState())},e.prototype.onBtnClose=function(){this.emit(c.EventType.AudioEvent.playClickBtn),this.emit(c.EventType.UIEvent.exit,h.GlobalEnum.UI.chooseLevel)},e.prototype.onBtnUnclock=function(){this.emit(c.EventType.AudioEvent.playClickBtn),this.emit(c.EventType.SDKEvent.showVideo,{success:this.unlockLevel.bind(this)})},e.prototype.unlockLevel=function(){var t=this.curPage,e=s.default.getData("gameData.curLevel");(t=void 0===e?0:Math.floor(e/this.countPerPage))!=this.curPage&&(this.curPage=t,this.showRecords(this.curPage));var n=e%this.countPerPage,o=this.plane.convertToNodeSpaceAR(this.itemLayer.children[n].convertToWorldSpaceAR(cc.v2(0,38)));this.showUnlockEffect(o)},e.prototype.initUnlockEffect=function(){this.unlockEffectMask.active=!1,this.unlockGuang.active=!1},e.prototype.resetUnlockEffect=function(){p.default.getMng(p.ActionMngType.UI).stopAllActions(this.unlockEffectMask),p.default.getMng(p.ActionMngType.UI).stopAllActions(this.unlockGuang),this.unlockEffectMask.active=!1,this.unlockGuang.active=!1},e.prototype.showUnlockEffect=function(t){if(this.emit(c.EventType.UIEvent.showTouchMask),void 0===t){var e=s.default.getData("gameData.curLevel")%this.countPerPage;t=this.plane.convertToNodeSpaceAR(this.itemLayer.children[e].convertToWorldSpaceAR(cc.v2(0,38)))}this.unlockEffectMask.active=!0,this.unlockEffectMask.setPosition(t),this.unlockEffectMask.opacity=50;var n=p.default.fadeTo(1,255);n.easing(p.default.easeSinIn());var o=p.default.callFun(this.onUnlockEffectFadeIn.bind(this),this),i=p.default.delay(.3),a=p.default.fadeTo(.5,0),r=p.default.callFun(this.onUnlockEffectFadeOut,this),h=p.default.sequence(n,o,i,a,r);p.default.getMng(p.ActionMngType.UI).runAction(this.unlockEffectMask,h)},e.prototype.onUnlockEffectFadeIn=function(){this.emit(c.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.curLevel",value:1,mode:"+"}),this.showRecords(this.curPage),this.updateBtnState()},e.prototype.onUnlockEffectFadeOut=function(){p.default.getMng(p.ActionMngType.UI).stopAllActions(this.unlockGuang),this.unlockEffectMask.active=!1,this.unlockGuang.active=!1,this.emit(c.EventType.UIEvent.hideTouchMask)},a([d(cc.Node)],e.prototype,"plane",void 0),a([d(cc.Node)],e.prototype,"itemLayer",void 0),a([d(cc.SpriteFrame)],e.prototype,"passItem",void 0),a([d(cc.SpriteFrame)],e.prototype,"clockItem",void 0),a([d(cc.Node)],e.prototype,"levelLayer",void 0),a([d(cc.Button)],e.prototype,"btnPrePage",void 0),a([d(cc.Button)],e.prototype,"btnNextPage",void 0),a([d(cc.Node)],e.prototype,"unlockEffectMask",void 0),a([d(cc.Node)],e.prototype,"unlockGuang",void 0),a([l],e)}(r.default);n.default=y,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/PlayerData":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],ClickTip:[function(t,e,n){"use strict";cc._RF.push(e,"c0a63AnQaVKXYJEneHB8OOB","ClickTip");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/yyComponent"),s=cc._decorator,c=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finishEvent=null,e.click=null,e.tip=null,e}return i(e,t),e.prototype.init=function(){this.node.active=!1},e.prototype.reset=function(){this.node.active=!1},e.prototype.show=function(t){if(this.node.active=!0,this.onEvents(),this.click.setPosition(cc.v2()),t){if(t.worldPos){var e=this.node.convertToNodeSpaceAR(t.worldPos);this.click.setPosition(e)}t.eventName&&(this.finishEvent=t.eventName),t.tip?this.showTip(t.tip):this.hideTip()}},e.prototype.hide=function(){this.node.active=!1,this.offEvents()},e.prototype.onEvents=function(){this.node.on("touchstart",this.touchStart,this)},e.prototype.offEvents=function(){this.node.off("touchstart",this.touchStart,this)},e.prototype.touchStart=function(){if(this.finishEvent){var t=this.finishEvent;this.finishEvent=null,this.emit(t)}this.hide()},e.prototype.showClick=function(){this.click.active=!0},e.prototype.hideClick=function(){this.click.active=!0},e.prototype.showTip=function(t){t&&(this.tip.string=t),this.tip.node.active=!0},e.prototype.hideTip=function(){this.tip.node.active=!1},a([p(cc.Node)],e.prototype,"click",void 0),a([p(cc.Label)],e.prototype,"tip",void 0),a([c],e)}(r.default);n.default=h,cc._RF.pop()},{"../../Script/Common/yyComponent":void 0}],ConfigSettingUI:[function(t,e,n){"use strict";cc._RF.push(e,"5219a61WZBHrLPY3aPlPMyY","ConfigSettingUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/yyComponent"),s=t("../../Script/GameSpecial/GameConfig"),c=t("../../Script/GameSpecial/GameEventType"),p=t("../../Script/GameSpecial/GlobalEnum"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.togBGM=null,e.togEffect=null,e.togVibrate=null,e}return i(e,t),e.prototype.initConfig=function(){var t=s.default.audioConfig;this.togBGM.isChecked=t.bgm,this.togEffect.isChecked=t.effect;var e=s.default.driveConfig;this.togVibrate.isChecked=e.vibrate},e.prototype.init=function(){this.initComponents(),this.initConfig()},e.prototype.show=function(){this.node.active||(this.node.active=!0,this.emit(c.EventType.DirectorEvent.pauseLevel),this.initConfig())},e.prototype.hide=function(){this.node.active&&(this.node.active=!1,this.emit(c.EventType.DirectorEvent.resumeLevel))},e.prototype.saveConfig=function(){var t={bgm:this.togBGM.isChecked,effect:this.togEffect.isChecked};s.default.audioConfig=t;var e={vibrate:this.togVibrate.isChecked};s.default.driveConfig=e},e.prototype.onBtnClose=function(){this.saveConfig(),this.emit(c.EventType.DirectorEvent.resumeLevel),this.emit(c.EventType.UIEvent.exit,p.GlobalEnum.UI.configSetting)},e.prototype.onCloseBGM=function(){this.togBGM.isChecked?this.emit(c.EventType.AudioEvent.playBGM,p.GlobalEnum.AudioClip.BGM):this.emit(c.EventType.AudioEvent.stopBGM)},a([l(cc.Toggle)],e.prototype,"togBGM",void 0),a([l(cc.Toggle)],e.prototype,"togEffect",void 0),a([l(cc.Toggle)],e.prototype,"togVibrate",void 0),a([u],e)}(r.default);n.default=d,cc._RF.pop()},{"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameConfig":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],GoldDialogUI:[function(t,e,n){"use strict";cc._RF.push(e,"2328a6f3zNP3rgYp7MZewax","GoldDialogUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/yyComponent"),s=t("../../Script/GameSpecial/GameEventType"),c=t("../../Script/GameSpecial/GlobalEnum"),p=cc._decorator,h=p.ccclass,u=p.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldLabel=null,e}return i(e,t),e.prototype.init=function(){this.initComponents()},e.prototype.show=function(){this.node.active||(this.node.active=!0,this._showBanner())},e.prototype.hide=function(){this.node.active&&(this.node.active=!1,this._hideBanner())},e.prototype.onBtnClose=function(){this.emit(s.EventType.UIEvent.exit,c.GlobalEnum.UI.goldDialog)},e.prototype.onBtnVideo=function(){this.emit(s.EventType.AudioEvent.playClickBtn),this.emit(s.EventType.SDKEvent.showVideo,{success:this.getGold.bind(this),quit:this.playVideoFail.bind(this)})},e.prototype.getGold=function(){this.addGold(500,this.onBtnClose.bind(this))},e.prototype.playVideoFail=function(){this.emit(s.EventType.UIEvent.showTip,"\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u91d1\u5e01\u54e6~~")},e.prototype.addGold=function(t,e){var n=this;this.emit(s.EventType.AudioEvent.playEffect,c.GlobalEnum.AudioClip.glod);var o=this.goldLabel.convertToWorldSpaceAR(cc.v2()),i=cc.find("Canvas");o.x-=.5*i.width,o.y-=.5*i.height,this.emit(s.EventType.UIEvent.playGoldAnim,{startPos:o,cb:function(){n.emit(s.EventType.PlayerDataEvent.updatePlayerData,{attribute:"gameData.asset.gold",value:t,mode:"+"}),e&&e()},gold:t})},e.prototype._showBanner=function(){this.emit(s.EventType.SDKEvent.showBanner,{style:{horizontal:"middle"}})},e.prototype._hideBanner=function(){this.emit(s.EventType.SDKEvent.hideBanner)},e.prototype._removeBanner=function(){this.emit(s.EventType.SDKEvent.hideBanner)},a([u(cc.Node)],e.prototype,"goldLabel",void 0),a([h],e)}(r.default);n.default=l,cc._RF.pop()},{"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],ShopItem:[function(t,e,n){"use strict";cc._RF.push(e,"5a631MrW1ZFcYMlXrLofj5W","ShopItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=t("../../Script/Common/GameData"),c=t("../../Script/Common/PlayerData"),p=t("../../Script/Common/yyComponent"),h=t("../../Script/GameSpecial/GameEventType"),u=cc._decorator,l=u.ccclass,d=u.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemSprite=null,e.id=0,e.btnVideo=null,e.btnBuy=null,e.goldNum=null,e.btnOwn=null,e}return i(e,t),e.prototype.init=function(t){t.id&&(this.id=t.id),t.img&&(this.itemSprite.spriteFrame=t.img),this.setData()},e.prototype.reuse=function(t){t.id&&(this.id=t.id),t.img&&(this.itemSprite.spriteFrame=t.img),this.setData()},e.prototype.unuse=function(){},e.prototype.setData=function(){var t=c.default.getData("gameData.PlayerSkin.owned"),e=s.default.getData("SkinData");if(t.indexOf(this.id)>=0)this.showBtnOwn();else{var n=e[this.id].cost.type,o=e[this.id].cost.value;"gold"==n?(this.goldNum.string=o.toString(),this.showBtnBuy()):"video"==n?this.showBtnVideo():"skinIn"==n&&this.hideBtn()}},e.prototype.updateState=function(){this.setData()},e.prototype.onBtnVideo=function(){this.emit(h.EventType.ShopEvent.onBtnVideo,this)},e.prototype.onBtnBuy=function(){this.emit(h.EventType.ShopEvent.onBtnBuy,this)},e.prototype.onBtnOwn=function(){this.emit(h.EventType.ShopEvent.onBtnOwn,this)},e.prototype.hideBtn=function(){this.btnBuy.node.active=!1,this.btnVideo.node.active=!1,this.btnOwn.node.active=!1},e.prototype.showBtnBuy=function(){this.hideBtn(),this.btnBuy.node.active=!0},e.prototype.showBtnVideo=function(){this.hideBtn(),this.btnVideo.node.active=!0},e.prototype.showBtnOwn=function(){this.hideBtn(),this.btnOwn.node.active=!0},a([d(cc.Sprite)],e.prototype,"itemSprite",void 0),a([d(cc.Button)],e.prototype,"btnVideo",void 0),a([d(cc.Button)],e.prototype,"btnBuy",void 0),a([d(cc.Label)],e.prototype,"goldNum",void 0),a([d(cc.Button)],e.prototype,"btnOwn",void 0),a([l],e)}(p.default);n.default=y,function(t){t[t.using=0]="using",t[t.unlock=1]="unlock",t[t.needBuy=2]="needBuy",t[t.needTry=3]="needTry",t[t.trying=4]="trying"}(r||(r={})),cc._RF.pop()},{"../../Script/Common/GameData":void 0,"../../Script/Common/PlayerData":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0}],ShopUI:[function(t,e,n){"use strict";cc._RF.push(e,"f1146XD9dZL0oi7dzvFICfT","ShopUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/yyComponent"),s=t("../../Script/GameSpecial/GlobalEnum"),c=t("../../Script/GameSpecial/GameEventType"),p=t("../../Script/Common/GameData"),h=t("../../Script/Common/PlayerData"),u=t("./ShopItem"),l=t("../../Script/Common/GlobalPool"),d=t("../../Script/Common/Loader"),y=cc._decorator,f=y.ccclass,v=y.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._uiType=s.GlobalEnum.UI.shop,e.itemPrefab=null,e.itemLayer=null,e.items=[],e.idTemp=null,e.roleSke=null,e}return i(e,t),Object.defineProperty(e.prototype,"uiType",{get:function(){return this._uiType},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initItem(),this.initComponents(),this.onEvents(),this.initRoleShow(),this.loadAsset()},e.prototype.onEvents=function(){this.on(c.EventType.ShopEvent.onBtnBuy,this.onBtnBuy,this),this.on(c.EventType.ShopEvent.onBtnVideo,this.onBtnVideo,this),this.on(c.EventType.ShopEvent.onBtnOwn,this.onBtnChoose,this)},e.prototype.reset=function(){this.resetItem()},e.prototype.show=function(){this.node.active=!0,this.reset(),this.setData(),this.emit(c.EventType.SDKEvent.hideBanner)},e.prototype.setData=function(){this.updateBtns()},e.prototype.hide=function(){this.reset(),this.node.active=!1},e.prototype.loadAsset=function(){var t=this;d.default.loadBundle("LobbyUI",function(){d.default.loadBundleDir("LobbyUI","Image/skin",function(e){for(var n={},o=e.length-1;o>=0;--o)n[e[o].name]=e[o];for(o=0;o<e.length;o++){var i=l.default.get("ShopItem",{id:o+1,img:n[o+1]}),a=i.getComponent(u.default);t.itemLayer.addChild(i),t.items.push(a)}},cc.SpriteFrame,!0)},!0,!0)},e.prototype.initItem=function(){this.curItemId=null,this.items=[],this.itemLayer.removeAllChildren(),l.default.createPool(this.itemPrefab.name,this.itemPrefab,this.itemPrefab.name)},e.prototype.resetItem=function(){},e.prototype.updateBtns=function(){for(var t=this.items.length-1;t>=0;--t)this.items[t].updateState()},e.prototype.onBtnExit=function(){this.emit(c.EventType.AudioEvent.playClickBtn),this.emit(c.EventType.UIEvent.exit,this.uiType),this.emit(c.EventType.UIEvent.enter,s.GlobalEnum.UI.lobby)},e.prototype.onBtnBuy=function(t){var e=t.id,n=h.default.getData("gameData.asset.gold"),o=p.default.getData("SkinData")[e].cost.value;n<o?this.tipGoldUnenough():(this.subGold(o),this.unlockSkin(s.GlobalEnum.GoodsType.playerSkin,e),this.setCurSkin(s.GlobalEnum.GoodsType.playerSkin,e),this.updateBtns(),this.curItemId=e,this.setSkin(e))},e.prototype.subGold=function(t){this.emit(c.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.asset.gold",value:t,mode:"-",save:!0,emit:!0})},e.prototype.unlockSkin=function(t,e){this.emit(c.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData."+t+".owned",value:parseInt(e),mode:"push",save:!0,emit:!0})},e.prototype.setCurSkin=function(t,e){this.emit(c.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData."+t+".cur",value:parseInt(e),mode:"=",save:!0,emit:!0}),this.emit(c.EventType.ShopEvent.curSkinChange)},e.prototype.tipGoldUnenough=function(){this.emit(c.EventType.UIEvent.showTip,"\u91d1\u5e01\u4e0d\u8db3")},e.prototype.onBtnVideo=function(t){this.idTemp=t.id,this.emit(c.EventType.SDKEvent.showVideo,{success:this.tryByVideo.bind(this),quit:this.tryByVideoQuit.bind(this)})},e.prototype.tryByVideo=function(){this.unlockSkin(s.GlobalEnum.GoodsType.playerSkin,this.curItemId),this.setCurSkin(s.GlobalEnum.GoodsType.playerSkin,this.curItemId),this.curItemId=this.idTemp,this.setSkin(this.curItemId),this.updateBtns()},e.prototype.tryByVideoQuit=function(){this.emit(c.EventType.UIEvent.showTip,"\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u65b0\u76ae\u80a4\u54e6~~")},e.prototype.onBtnChoose=function(t){var e=t.id;h.default.getData("gameData.PlayerSkin.owned").indexOf(e)>=0&&(this.emit(c.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.PlayerSkin.cur",value:e,mode:"=",save:!0,emit:!0}),this.curItemId=t.id,this.emit(c.EventType.ShopEvent.curSkinChange)),this.updateBtns(),this.setSkin(this.curItemId)},e.prototype.setSkin=function(t){var e;if(t){this.curItemId=t;var n=t.toString();t<10&&(n="0"+n),e="juesepifu/"+n}else this.curItemId=null,e="default";this.roleSke.setSkin(e)},e.prototype.initRoleShow=function(){this.curItemId=h.default.getData("gameData.PlayerSkin.cur"),this.roleSke.setAnimation(0,"daiji",!0),this.setSkin(this.curItemId)},a([v(cc.Prefab)],e.prototype,"itemPrefab",void 0),a([v(cc.Node)],e.prototype,"itemLayer",void 0),a([v(sp.Skeleton)],e.prototype,"roleSke",void 0),a([f],e)}(r.default);n.default=m,cc._RF.pop()},{"../../Script/Common/GameData":void 0,"../../Script/Common/GlobalPool":void 0,"../../Script/Common/Loader":void 0,"../../Script/Common/PlayerData":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0,"./ShopItem":"ShopItem"}],SignInUI:[function(t,e,n){"use strict";cc._RF.push(e,"06151uAGF5DQo2CjELAc7f4","SignInUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/Action3dManager"),s=t("../../Script/Common/GameFlow"),c=t("../../Script/Common/PlayerData"),p=t("../../Script/Common/yyComponent"),h=t("../../Script/GameSpecial/GameEventType"),u=t("../../Script/GameSpecial/GlobalEnum"),l=cc._decorator,d=l.ccclass,y=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.signInAward={1:{type:"gold",gold:500},2:{type:"role",id:19},3:{type:"role",id:13},4:{type:"gold",gold:1e3},5:{type:"gold",gold:1500},6:{type:"gold",gold:2e3},7:{type:"other",gold:2500,id1:18,id2:17,id3:8}},e.nowDay=0,e.togEffect=null,e.signIned=[],e.signInBtn=null,e.signInBtnGet=null,e.btnContinueGame=null,e.btnContinueEnabled=!0,e}return i(e,t),e.prototype.init=function(){this.initBtnContinueGame(),this.initComponents()},e.prototype.resets=function(){this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.signIn.allDays",value:0,mode:"=",save:!0,emit:!0}),this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.signIn.lastDay",value:0,mode:"=",save:!0,emit:!0}),this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.asset.gold",value:0,mode:"=",save:!0,emit:!0}),this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.PlayerSkin.owned",value:[1],mode:"=",save:!0,emit:!0}),this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.curLevel",value:1,mode:"=",save:!0,emit:!0}),this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.curBoss",value:0,mode:"=",save:!0,emit:!0})},e.prototype.show=function(){this.node.active=!0,this.emit(h.EventType.DirectorEvent.pauseLevel),this.initConfig(),this.setFinish()},e.prototype.hide=function(){this.node.active&&(this.node.active=!1,this.emit(h.EventType.DirectorEvent.resumeLevel))},e.prototype.initConfig=function(){var t=c.default.getData("gameData.signIn");this.nowDay=t.allDays;var e=(new Date).getDate();if(7==t.allDays||t.lastDay==e)return this.signInBtn.interactable=!1,void(this.signInBtnGet.interactable=!1);this.signInBtn.interactable=!0,this.signInBtnGet.interactable=!0},e.prototype.onBtnClose=function(){this.emit(h.EventType.DirectorEvent.resumeLevel),this.emit(h.EventType.UIEvent.exit,u.GlobalEnum.UI.signIn),this.emit(h.EventType.UIEvent.enter,u.GlobalEnum.UI.lobby)},e.prototype.setFinish=function(){for(var t=0;t<this.signIned.length;t++)t<this.nowDay?this.signIned[t].active=!0:this.signIned[t].active=!1},e.prototype.onSignInBtn=function(){this.emit(h.EventType.AudioEvent.playClickBtn),this.playVideo()},e.prototype.onBtnGet=function(){this.btnContinueEnabled&&(this.emit(h.EventType.AudioEvent.playClickBtn),this.signIn(1))},e.prototype.playVideo=function(){this.emit(h.EventType.SDKEvent.showVideo,{success:this.signIn.bind(this,2),quit:this.tryByVideoQuit.bind(this)})},e.prototype.signIn=function(t){var e=this.signInAward[this.nowDay+1];"gold"==e.type?this.getGold(t*e.gold):"role"==e.type?this.getRole(e.id):"other"==e.type&&(this.getGold(t*e.gold),this.getRole(e.id1),this.getRole(e.id2),this.getRole(e.id3)),this.succeedSignIn(),this.updateBtns()},e.prototype.getGold=function(t){this.addGold(t)},e.prototype.getRole=function(t){this.unlockSkin(u.GlobalEnum.GoodsType.playerSkin,t),this.setCurSkin(u.GlobalEnum.GoodsType.playerSkin,t)},e.prototype.tryByVideoQuit=function(){this.emit(h.EventType.UIEvent.showTip,"\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u53cc\u500d\u7b7e\u5230\u54e6~~~")},e.prototype.addGold=function(t){this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.asset.gold",value:t,mode:"+",save:!1,emit:!0})},e.prototype.unlockSkin=function(t,e){this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData."+t+".owned",value:parseInt(e),mode:"push",save:!1,emit:!1})},e.prototype.setCurSkin=function(t,e){this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData."+t+".cur",value:parseInt(e),mode:"=",save:!0,emit:!0})},e.prototype.succeedSignIn=function(){this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.signIn.allDays",value:1,mode:"+",save:!0,emit:!0}),this.emit(h.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.signIn.lastDay",value:(new Date).getDate(),mode:"=",save:!0,emit:!0})},e.prototype.updateBtns=function(){var t=c.default.getData("gameData.signIn"),e=(new Date).getDate();7==t.allDays||t.lastDay==e?(this.signInBtn.interactable=!1,this.signInBtnGet.interactable=!1):(this.signInBtn.interactable=!0,this.signInBtnGet.interactable=!0),this.nowDay=t.allDays,this.setFinish(),this.animaBtn()},e.prototype.animaBtn=function(){var t=this.signIned[this.nowDay-1];t.setScale(cc.v2(1.3,1.3));var e=r.default.scaleTo(.2,2,2),n=r.default.scaleTo(.3,1,1),o=r.default.sequence(e,n);r.default.getMng(r.ActionMngType.UI).runAction(t,o)},e.prototype.initBtn=function(){var t=this,e=s.default.getConfig("alert").weiyi;if(console.log(e),0==e.kaiguan||1==e.daochumode)this.setBtnContinueGameNormal(),setTimeout(function(){t._showBanner()},40);else{this.setBtnContinueGameBelowBanner();var n=e.chuxian-0;n<0&&(n=0),setTimeout(function(n){void 0===n&&(n=e.yidong-0),n<0&&(n=0),t._showBanner(),setTimeout(function(){t.moveUpBtnContinue()},1e3*n)},1e3*n)}},e.prototype.initBtnContinueGame=function(){this.btnContinueEnabled=!0},e.prototype.resetBtnContinueGame=function(){this.btnContinueEnabled=!0,r.default.getMng(r.ActionMngType.UI).stopAllActions(this.btnContinueGame)},e.prototype.computeNodeWidgetBottom=function(t,e){var n=cc.find("Canvas");return t.height*t.anchorY-.5*n.height+e},e.prototype.setBtnContinueGameBelowBanner=function(){this.btnContinueEnabled=!1,this.btnContinueGame.setPosition(0,this.computeNodeWidgetBottom(this.btnContinueGame,30))},e.prototype.setBtnContinueGameNormal=function(){this.btnContinueEnabled=!0,this.btnContinueGame.setPosition(0,this.computeNodeWidgetBottom(this.btnContinueGame,240))},e.prototype.moveUpBtnContinue=function(){var t=this.computeNodeWidgetBottom(this.btnContinueGame,240),e=r.default.moveTo(.8,0,t,0),n=r.default.callFun(this.onBtnContinueAnimFinish,this),o=r.default.sequence(e,n);r.default.getMng(r.ActionMngType.UI).runAction(this.btnContinueGame,o)},e.prototype.onBtnContinueAnimFinish=function(){this.btnContinueEnabled=!0},e.prototype._showBanner=function(){this.emit(h.EventType.SDKEvent.showBanner,{style:{horizontal:"middle"}})},e.prototype._hideBanner=function(){this.emit(h.EventType.SDKEvent.hideBanner)},e.prototype._removeBanner=function(){this.emit(h.EventType.SDKEvent.hideBanner)},a([y(cc.Toggle)],e.prototype,"togEffect",void 0),a([y([cc.Node])],e.prototype,"signIned",void 0),a([y(cc.Button)],e.prototype,"signInBtn",void 0),a([y(cc.Button)],e.prototype,"signInBtnGet",void 0),a([y(cc.Node)],e.prototype,"btnContinueGame",void 0),a([d],e)}(p.default);n.default=f,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/GameFlow":void 0,"../../Script/Common/PlayerData":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],TouchBannerAwardUI:[function(t,e,n){"use strict";cc._RF.push(e,"02773s748ZOboYE6vWURlsp","TouchBannerAwardUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/Action3dManager"),s=t("../../Script/Common/yyComponent"),c=t("../../Script/GameSpecial/GameEventType"),p=t("../../Script/GameSpecial/GlobalEnum"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldGroup=null,e.awarded=!1,e.light=null,e}return i(e,t),Object.defineProperty(e.prototype,"uiType",{get:function(){return p.GlobalEnum.UI.touchBannerAward},enumerable:!1,configurable:!0}),e.prototype.show=function(t){this.node.active=!0,void 0!==t&&this.setData(t),this.playLight(),this.emit(c.EventType.UIEvent.enter,p.GlobalEnum.UI.playerAssetBar)},e.prototype.hide=function(){this.node.active=!1,this.stopLight(),this.emit(c.EventType.UIEvent.exit,p.GlobalEnum.UI.playerAssetBar)},e.prototype.setData=function(t){this.touchUI=t.touchUI,this.touchFinishEvent=t.touchFinishEvent,this.touchUIConfig=t.touchUIConfig,this.awarded=!1},e.prototype.touchBannerFinished=function(){this.emit(c.EventType.UIEvent.exit,this.touchUI),this.emit(this.touchFinishEvent),this.emit(c.EventType.UIEvent.exit,this.uiType)},e.prototype.getGold=function(t,e){var n=this,o=this.goldGroup.convertToWorldSpaceAR(cc.v2()),i=cc.find("Canvas");o.x-=.5*i.width,o.y-=.5*i.height,this.emit(c.EventType.UIEvent.playGoldAnim,{startPos:o,cb:function(){n.emit(c.EventType.PlayerDataEvent.updatePlayerData,{attribute:"gameData.asset.gold",value:t,mode:"+",emit:!0,save:!0}),n.awarded=!0,e&&e()},gold:t})},e.prototype.onBtnGet=function(){this.getGold(200,this.touchBannerFinished.bind(this))},e.prototype.onBtnTouchAgain=function(){this.getGold(200,this.touchAgain.bind(this))},e.prototype.touchAgain=function(){this.emit(c.EventType.UIEvent.enter,this.touchUI,this.touchUIConfig),this.emit(c.EventType.UIEvent.exit,this.uiType)},e.prototype.playLight=function(){var t=r.default.rotateTo2d(2,360),e=r.default.repeatForever(t);r.default.getMng(r.ActionMngType.UI).runAction(this.light,e)},e.prototype.stopLight=function(){r.default.getMng(r.ActionMngType.UI).stopAllActions(this.light)},e.prototype._showBanner=function(){this.emit(c.EventType.SDKEvent.hideBlockAd),console.log("\u9690\u85cf\u79ef\u6728\uff0c\u663e\u793abanner"),this.emit(c.EventType.SDKEvent.showBanner,{style:{top:10}})},e.prototype._hideBanner=function(){this.emit(c.EventType.SDKEvent.hideBanner)},e.prototype._removeBanner=function(){this.emit(c.EventType.SDKEvent.hideBanner)},a([l(cc.Node)],e.prototype,"goldGroup",void 0),a([l(cc.Node)],e.prototype,"light",void 0),a([u],e)}(s.default);n.default=d,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],TouchBannerUI1:[function(t,e,n){"use strict";cc._RF.push(e,"6746aKOT7lHLZEiPuMTWQ+O","TouchBannerUI1");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/Action3dManager"),s=t("../../Script/Common/GameFlow"),c=t("../../Script/Common/yyComponent"),p=t("../../Script/GameSpecial/GameEventType"),h=t("../../Script/GameSpecial/GlobalEnum"),u=cc._decorator,l=u.ccclass,d=u.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bar=null,e.barTotalLength=0,e.progress=0,e.boomerang=null,e.monster=null,e.boxPlaying=!1,e.touchCount=0,e.zadanbidiankaiguan=null,e.targetProgress=0,e.bannerShowing=!1,e.bannerShowCount=0,e.timerBanner3=null,e.goldLabel=null,e}return i(e,t),Object.defineProperty(e.prototype,"uiType",{get:function(){return h.GlobalEnum.UI.touchBanner1},enumerable:!1,configurable:!0}),e.prototype.init=function(t){this.initAnim(),this.initProgress(),this.randomTouchCount(t)},e.prototype.reset=function(){this.resetAnim(),this.resetProgress()},e.prototype.show=function(t){this.emit(p.EventType.UIEvent.exit,h.GlobalEnum.UI.playerAssetBar),console.log("\u5f00\u5173\u914d\u7f6e\uff1a",t),this.touchUIConfig=t,this.node.active=!0,this.reset(),this.randomTouchCount(t),this.zadanbidiankaiguan=t.config[h.GlobalEnum.RecommendFlowConfig.zadanbidiankaiguan]},e.prototype.hide=function(){this.off(p.EventType.SDKEvent.show,this.onShow,this),this.reset(),this.node.active=!1},e.prototype.initProgress=function(){this.barTotalLength=this.bar.getComponent(cc.Sprite).spriteFrame.getOriginalSize().width,this.progress=0,this.updateBarWidth()},e.prototype.resetProgress=function(){this.progress=0,this.updateBarWidth()},e.prototype.updateBarWidth=function(){var t=this.barTotalLength*(1-this.progress);t<1&&(t=1),this.bar.width=t},e.prototype.updateProgress=function(t){this.progress>.7?this.subProgress(1.5*t):this.progress>.4?this.subProgress(1.2*t):this.subProgress(1*t)},e.prototype.subProgress=function(t){this.progress-=t,this.progress<0&&(this.progress=0),this.updateBarWidth()},e.prototype.addProgress=function(t){this.progress+=t,this.progress>1&&(this.progress=1),this.updateBarWidth(),this.progress>=1&&this.getGoldForTouchBanner()},e.prototype.initAnim=function(){this.boxPlaying=!1},e.prototype.resetAnim=function(){r.default.getMng(r.ActionMngType.UI).stopAllActions(this.monster),this.monster.angle=0,this.boxPlaying=!1},e.prototype.playAnim=function(){this.monster.angle=0,this.throwBoomerang()},e.prototype.throwBoomerang=function(){r.default.getMng(r.ActionMngType.UI).stopAllActions(this.boomerang),this.boomerang.setPosition(cc.v2(-400,100)),this.boomerang.angle=0;var t=r.default.moveTo(.1,-105,388),e=r.default.rotateBy2d(.1,360),n=r.default.spawn(t,e),o=r.default.callFun(this.shakeBox,this),i=r.default.moveTo(.1,-400,100),a=r.default.rotateBy2d(.1,360),s=r.default.spawn(i,a),c=r.default.sequence(n,o,s);r.default.getMng(r.ActionMngType.UI).runAction(this.boomerang,c)},e.prototype.shakeBox=function(){if(!this.boxPlaying){this.boxPlaying=!0;var t=r.default.rotateTo2d(.05,10),e=r.default.rotateTo2d(.05,0),n=r.default.rotateTo2d(.05,-10),o=r.default.rotateTo2d(.05,0),i=r.default.callFun(this.onBoxAnimFinish,this),a=r.default.sequence(t,e,n,o,i);r.default.getMng(r.ActionMngType.UI).runAction(this.monster,a)}},e.prototype.onBoxAnimFinish=function(){this.boxPlaying=!1},e.prototype.randomTouchCount=function(t){this.zadanType=s.default.getGlobalConfig("zadanshengjikaiguan")?2:1;var e=2,n=6;if(void 0!==t&&void 0!==t.config){var o=t.config[h.GlobalEnum.RecommendFlowConfig.touchBannerClickCount].split("-");e=parseInt(o[0]),n=parseInt(o[1])}this.touchCount=e+Math.floor(Math.random()*(n-e+.999)),this.targetProgress=.1*this.touchCount,console.log("targetProgress:",this.targetProgress),this.bannerShowing=!1,this.bannerShowCount=0},e.prototype.onBtnShot=function(){switch(this.playAnim(),this.addProgress(.3),this.zadanType){case 1:this.zadan1();break;case 2:this.zadan2()}},e.prototype.zadan1=function(){if(!this.bannerShowing&&this.progress>=this.targetProgress){console.log("\u663e\u793abanner,",this.progress),this._showBanner(),this.bannerShowing=!0;var t=this.zadanbidiankaiguan;console.log("\u7838\u86cb\u5fc5\u70b9\u5f00\u5173: "+t),t&&1==t?(this.waitTouchBanner(),console.log("\u8fd8\u6ca1\u7ed3\u675f\uff0c\u5f97\u70b9\u51fbbanner\u624d\u53ef\u4ee5")):(this.autoHideBanner(),console.log("\u597d\u4e86\u7ee7\u7eed\u6e38\u620f\u5427"))}},e.prototype.autoHideBanner=function(){var t=this;setTimeout(function(){t.bannerShowing=!1,t._hideBanner(),t.getGoldForTouchBanner()},2e3)},e.prototype.waitTouchBanner=function(){var t=this;this.once(p.EventType.SDKEvent.show,this.onShow,this),setTimeout(function(){t._hideBanner(),t.bannerShowing=!1},2e3)},e.prototype.onShow=function(){this.node.activeInHierarchy&&(this.bannerShowing=!1,this._hideBanner(),null!==this.timerBanner3&&(clearTimeout(this.timerBanner3),this.timerBanner3=null),this.getGoldForTouchBanner())},e.prototype.zadan2=function(){if(!this.bannerShowing&&this.progress>=this.targetProgress)switch(this.bannerShowCount){case 0:this.showBanner1();break;case 1:this.showBanenr2()}},e.prototype.showBanner=function(){this._showBanner(),this.bannerShowing=!0,this.bannerShowCount++},e.prototype.showBanner1=function(){var t=this;this.showBanner(),this.once(p.EventType.SDKEvent.show,this.onShow,this),setTimeout(function(){t._hideBanner(),t.bannerShowing=!1},2e3),this.targetProgress=.01},e.prototype.showBanenr2=function(){var t=this;this.showBanner(),setTimeout(function(){t._hideBanner(),t.bannerShowing=!1},2e3),this.timerBanner3=setTimeout(this.showBanner3.bind(this),3e3)},e.prototype.showBanner3=function(){var t=this;this.node.activeInHierarchy&&(this.showBanner(),setTimeout(function(){t.bannerShowing=!1,t._hideBanner(),t.getGoldForTouchBanner()},2e3))},e.prototype.getGoldForTouchBanner=function(){this.emit(p.EventType.UIEvent.exit,this.uiType),this.emit(p.EventType.UIEvent.enter,h.GlobalEnum.UI.touchBannerAward,{touchUI:this.uiType,touchFinishEvent:p.EventType.UIEvent.touchBannerFinish,touchUIConfig:this.touchUIConfig})},e.prototype.exit=function(){this.emit(p.EventType.UIEvent.exit,this.uiType),this.emit(p.EventType.UIEvent.touchBannerFinish)},e.prototype.addGold=function(t,e){var n=this;this.emit(p.EventType.AudioEvent.playEffect,h.GlobalEnum.AudioClip.glod);var o=this.goldLabel.convertToWorldSpaceAR(cc.v2()),i=cc.find("Canvas");o.x-=.5*i.width,o.y-=.5*i.height,this.emit(p.EventType.UIEvent.playGoldAnim,{startPos:o,cb:function(){n.emit(p.EventType.PlayerDataEvent.updatePlayerData,{attribute:"gameData.asset.gold",value:t,mode:"+"}),e&&e()},gold:t})},e.prototype._showBanner=function(){this.emit(p.EventType.SDKEvent.showBanner,{style:{horizontal:"middle"}})},e.prototype._hideBanner=function(){this.emit(p.EventType.SDKEvent.hideBanner)},e.prototype._removeBanner=function(){this.emit(p.EventType.SDKEvent.hideBanner)},e.prototype.update=function(t){this.updateProgress(t)},a([d(cc.Node)],e.prototype,"bar",void 0),a([d(cc.Node)],e.prototype,"boomerang",void 0),a([d(cc.Node)],e.prototype,"monster",void 0),a([d(cc.Node)],e.prototype,"goldLabel",void 0),a([l],e)}(c.default);n.default=y,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/GameFlow":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],TouchBannerUI2:[function(t,e,n){"use strict";cc._RF.push(e,"7b7945WVmlAXI2smuu+EDeY","TouchBannerUI2");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Script/Common/Action3dManager"),s=t("../../Script/Common/GameFlow"),c=t("../../Script/Common/yyComponent"),p=t("../../Script/GameSpecial/GameEventType"),h=t("../../Script/GameSpecial/GlobalEnum"),u=cc._decorator,l=u.ccclass,d=u.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bar=null,e.barTotalLength=0,e.progress=0,e.player=null,e.boxPlaying=!1,e.touchCount=0,e.zadanbidiankaiguan=null,e.targetProgress=0,e.bannerShowing=!1,e.bannerShowCount=0,e.timerBanner3=null,e.goldLabel=null,e}return i(e,t),Object.defineProperty(e.prototype,"uiType",{get:function(){return h.GlobalEnum.UI.touchBanner2},enumerable:!1,configurable:!0}),e.prototype.init=function(t){this.initAnim(),this.initProgress(),this.randomTouchCount(t)},e.prototype.reset=function(){this.resetAnim(),this.resetProgress()},e.prototype.show=function(t){this.emit(p.EventType.UIEvent.exit,h.GlobalEnum.UI.playerAssetBar),console.log("\u5f00\u5173\u914d\u7f6e\uff1a",t),this.touchUIConfig=t,this.node.active=!0,this.reset(),this.randomTouchCount(t),this.zadanbidiankaiguan=t.config[h.GlobalEnum.RecommendFlowConfig.zadanbidiankaiguan]},e.prototype.hide=function(){this.off(p.EventType.SDKEvent.show,this.onShow,this),this.reset(),this.node.active=!1},e.prototype.touchBannerFinish=function(){this.emit(p.EventType.UIEvent.exit,this.uiType),this.emit(p.EventType.UIEvent.enter,h.GlobalEnum.UI.touchBannerAward,{touchUI:this.uiType,touchFinishEvent:p.EventType.UIEvent.touchBannerFinish,touchUIConfig:this.touchUIConfig})},e.prototype.initProgress=function(){this.barTotalLength=this.bar.getComponent(cc.Sprite).spriteFrame.getOriginalSize().width,this.progress=0,this.updateBarWidth()},e.prototype.resetProgress=function(){this.progress=0,this.updateBarWidth()},e.prototype.updateBarWidth=function(){var t=this.barTotalLength*(1-this.progress);t<1&&(t=1),this.bar.width=t},e.prototype.updateProgress=function(t){this.progress>.7?this.subProgress(1.5*t):this.progress>.4?this.subProgress(1.2*t):this.subProgress(1*t)},e.prototype.subProgress=function(t){this.progress-=t,this.progress<0&&(this.progress=0),this.updateBarWidth()},e.prototype.addProgress=function(t){this.progress+=t,this.progress>1&&(this.progress=1),this.updateBarWidth(),this.progress>=1&&this.getGoldForTouchBanner()},e.prototype.initAnim=function(){this.boxPlaying=!1},e.prototype.resetAnim=function(){r.default.getMng(r.ActionMngType.UI).stopAllActions(this.player),this.boxPlaying=!1},e.prototype.playAnim=function(){this.shakeBox()},e.prototype.shakeBox=function(){if(!this.boxPlaying){this.boxPlaying=!0,this.player.setPosition(-250,-300);var t=r.default.moveTo(.1,0,-300),e=r.default.moveTo(.05,-250,-300),n=r.default.callFun(this.onBoxAnimFinish,this),o=r.default.sequence(t,e,n);r.default.getMng(r.ActionMngType.UI).runAction(this.player,o)}},e.prototype.onBoxAnimFinish=function(){this.boxPlaying=!1},e.prototype.randomTouchCount=function(t){this.zadanType=s.default.getGlobalConfig("zadanshengjikaiguan")?2:1;var e=2,n=6;if(void 0!==t&&void 0!==t.config){var o=t.config[h.GlobalEnum.RecommendFlowConfig.touchBannerClickCount].split("-");e=parseInt(o[0]),n=parseInt(o[1])}this.touchCount=e+Math.floor(Math.random()*(n-e+.999)),this.targetProgress=.1*this.touchCount,console.log("targetProgress:",this.targetProgress),this.bannerShowing=!1,this.bannerShowCount=0},e.prototype.onBtnShot=function(){switch(this.playAnim(),this.addProgress(.3),this.zadanType){case 1:this.zadan1();break;case 2:this.zadan2()}},e.prototype.zadan1=function(){if(!this.bannerShowing&&this.progress>=this.targetProgress){console.log("\u663e\u793abanner,",this.progress),this._showBanner(),this.bannerShowing=!0;var t=this.zadanbidiankaiguan;console.log("\u7838\u86cb\u5fc5\u70b9\u5f00\u5173: "+t),t&&1==t?(this.waitTouchBanner(),console.log("\u8fd8\u6ca1\u7ed3\u675f\uff0c\u5f97\u70b9\u51fbbanner\u624d\u53ef\u4ee5")):(this.autoHideBanner(),console.log("\u597d\u4e86\u7ee7\u7eed\u6e38\u620f\u5427"))}},e.prototype.autoHideBanner=function(){var t=this;setTimeout(function(){t.bannerShowing=!1,t._hideBanner(),t.getGoldForTouchBanner()},2e3)},e.prototype.waitTouchBanner=function(){var t=this;this.once(p.EventType.SDKEvent.show,this.onShow,this),setTimeout(function(){t._hideBanner(),t.bannerShowing=!1},2e3)},e.prototype.onShow=function(){this.node.activeInHierarchy&&(this.bannerShowing=!1,this._hideBanner(),null!==this.timerBanner3&&(clearTimeout(this.timerBanner3),this.timerBanner3=null),this.getGoldForTouchBanner())},e.prototype.zadan2=function(){if(!this.bannerShowing&&this.progress>=this.targetProgress)switch(this.bannerShowCount){case 0:this.showBanner1();break;case 1:this.showBanenr2()}},e.prototype.showBanner=function(){this._showBanner(),this.bannerShowing=!0,this.bannerShowCount++},e.prototype.showBanner1=function(){var t=this;this.showBanner(),this.once(p.EventType.SDKEvent.show,this.onShow,this),setTimeout(function(){t._hideBanner(),t.bannerShowing=!1},2e3),this.targetProgress=.01},e.prototype.showBanenr2=function(){var t=this;this.showBanner(),setTimeout(function(){t._hideBanner(),t.bannerShowing=!1},2e3),this.timerBanner3=setTimeout(this.showBanner3.bind(this),3e3)},e.prototype.showBanner3=function(){var t=this;this.node.activeInHierarchy&&(this.showBanner(),setTimeout(function(){t.bannerShowing=!1,t._hideBanner(),t.getGoldForTouchBanner()},2e3))},e.prototype.getGoldForTouchBanner=function(){this.emit(p.EventType.UIEvent.enter,h.GlobalEnum.UI.touchBannerAward,{touchUI:this.uiType,touchFinishEvent:p.EventType.UIEvent.touchBannerFinish,touchUIConfig:this.touchUIConfig})},e.prototype.exit=function(){this.emit(p.EventType.UIEvent.exit,this.uiType),this.emit(p.EventType.UIEvent.touchBannerFinish)},e.prototype.addGold=function(t,e){var n=this;this.emit(p.EventType.AudioEvent.playEffect,h.GlobalEnum.AudioClip.glod);var o=this.goldLabel.convertToWorldSpaceAR(cc.v2()),i=cc.find("Canvas");o.x-=.5*i.width,o.y-=.5*i.height,this.emit(p.EventType.UIEvent.playGoldAnim,{startPos:o,cb:function(){n.emit(p.EventType.PlayerDataEvent.updatePlayerData,{attribute:"gameData.asset.gold",value:t,mode:"+"}),e&&e()},gold:t})},e.prototype._showBanner=function(){this.emit(p.EventType.SDKEvent.showBanner,{style:{horizontal:"middle"}})},e.prototype._hideBanner=function(){this.emit(p.EventType.SDKEvent.hideBanner)},e.prototype._removeBanner=function(){this.emit(p.EventType.SDKEvent.hideBanner)},e.prototype.update=function(t){this.updateProgress(t)},a([d(cc.Node)],e.prototype,"bar",void 0),a([d(cc.Node)],e.prototype,"player",void 0),a([d(cc.Node)],e.prototype,"goldLabel",void 0),a([l],e)}(c.default);n.default=y,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/GameFlow":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}]},{},["ChooseLevelUI","ClickTip","ConfigSettingUI","GoldDialogUI","ShopItem","ShopUI","SignInUI","TouchBannerAwardUI","TouchBannerUI1","TouchBannerUI2"]);