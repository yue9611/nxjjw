window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({CollisComp:[function(t,e,o){"use strict";cc._RF.push(e,"62983Ix2etJ2bcJHjbrmdKO","CollisComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Script/Common/yyComponent"),s=cc._decorator,l=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=null,e.collisType=null,e}return i(e,t),e.prototype.init=function(){},e.prototype.reuse=function(){},e.prototype.unuse=function(){},e.prototype.setData=function(){},e.prototype.reset=function(){},e.prototype.updateWidget=function(){for(var t=this.node.getComponentsInChildren(cc.Widget),e=0;e<t.length;e++)t[e].updateAlignment()},e.prototype.onBeginContact=function(){},e.prototype.onEndContact=function(){},e.prototype.onPreSolve=function(){},e.prototype.onPostSolve=function(){},e.prototype.collisDirec=function(t,e){var o=e.world.preAabb,n=t.world.preAabb;return o.x+o.width<n.x?"-x":o.x>n.x+n.width?"+x":o.y+o.height<n.y?"-y":o.y>n.y+n.height?"+y":void 0},e.prototype.getMapData=function(){var t={};return t.name=this.node.name,t.pos=[this.node.x,this.node.y],t.data=this._getMapData(),t},e.prototype._getMapData=function(){return{}},r([l],e)}(a.default));o.default=c,cc._RF.pop()},{"../../../Script/Common/yyComponent":void 0}],GameDirector:[function(t,e,o){"use strict";cc._RF.push(e,"6d088A7nYNLd6wJkhsMlfmq","GameDirector");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Script/Common/yyComponent"),s=t("../../Script/GameSpecial/GameEventType"),l=t("../../Script/Common/Action3dManager"),c=t("../../Script/Common/UIManager"),p=t("../../Script/Common/PlayerData"),u=t("../../Script/Common/AudioManager"),h=t("../../Script/Common/GameData"),d=t("../../Script/Common/PowerManager"),y=t("../../Script/Common/Loader"),f=t("../../Script/GameSpecial/GlobalEnum"),v=t("../../Script/Advert/AdvertManager"),m=t("../../Script/Common/GlobalPool"),g=cc._decorator,b=g.ccclass,E=g.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.touchMask=null,e.defaultUIs=[],e.lobbyUIs=[],e.levelUIs=[],e.persistUIs=[],e.levelMng=null,e.uiActMng=null,e.recommendFlowStepFinish=!1,e.chosedLevel=null,e}return i(e,t),e.prototype.onLoad=function(){cc.systemEvent.setAccelerometerEnabled(!0),cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){this.init(),this.loadGameData()},e.prototype.update=function(t){this.uiActMng.update(t),this.customUpdate(t)},e.prototype.initTouchMask=function(){this.touchMask.active=!1,this.touchMaskCount=0},e.prototype.resetTouchMask=function(){this.touchMask.active=!1,this.touchMaskCount=0},e.prototype.showTouchMask=function(t){void 0===t&&(t=1),this.touchMaskCount+=t,this.touchMask.active=!0},e.prototype.hideTouchMask=function(t){void 0===t&&(t=1),this.touchMaskCount-=t,this.touchMaskCount<=0&&(this.touchMaskCount=0,this.touchMask.active=!1)},e.prototype.pauseLevel=function(){this.emit(s.EventType.DirectorEvent.pauseLevel)},e.prototype.resumeLevel=function(){this.emit(s.EventType.DirectorEvent.resumeLevel)},e.prototype.showUI=function(t,e){this.emit(s.EventType.UIEvent.enter,t,e)},e.prototype.showUIs=function(t){for(var e=t.length-1;e>=0;--e)this.emit(s.EventType.UIEvent.enter,t[e])},e.prototype.hideUI=function(t){this.emit(s.EventType.UIEvent.exit,t)},e.prototype.hideUIs=function(t){for(var e=t.length-1;e>=0;--e)this.emit(s.EventType.UIEvent.exit,t[e])},e.prototype.initDefaultUIs=function(){for(var t=this.defaultUIs.length-1;t>=0;--t)this.defaultUIs[t].init()},e.prototype.initUIConfig=function(){this.lobbyUIs=[],this.lobbyUIs.push(f.GlobalEnum.UI.lobby),this.lobbyUIs.push(f.GlobalEnum.UI.shop),this.lobbyUIs.push(f.GlobalEnum.UI.chooseLevel),this.lobbyUIs.push(f.GlobalEnum.UI.touchBanner1),this.lobbyUIs.push(f.GlobalEnum.UI.touchBanner2),this.lobbyUIs.push(f.GlobalEnum.UI.signIn),this.levelUIs=[],this.levelUIs.push(f.GlobalEnum.UI.levelInfo),this.levelUIs.push(f.GlobalEnum.UI.levelTeach),this.levelUIs.push(f.GlobalEnum.UI.awardUI),this.levelUIs.push(f.GlobalEnum.UI.winUI),this.levelUIs.push(f.GlobalEnum.UI.loseUI),this.levelUIs.push(f.GlobalEnum.UI.trySkin),this.levelUIs.push(f.GlobalEnum.UI.pauseLevel),this.levelUIs.push(f.GlobalEnum.UI.resurgence),this.levelUIs.push(f.GlobalEnum.UI.touchBanner1),this.levelUIs.push(f.GlobalEnum.UI.touchBanner2),this.levelUIs.push(f.GlobalEnum.UI.touchBannerAward),this.persistUIs=[],this.persistUIs.push(f.GlobalEnum.UI.playerAssetBar),this.persistUIs.push(f.GlobalEnum.UI.tipPower),this.persistUIs.push(f.GlobalEnum.UI.getPower),this.persistUIs.push(f.GlobalEnum.UI.configSetting),this.persistUIs.push(f.GlobalEnum.UI.goldDialog)},e.prototype.initActMng=function(){this.uiActMng=l.default.getMng(l.ActionMngType.UI)},e.prototype.init=function(){this.initUIConfig(),this.initActMng(),this.initTouchMask(),this.initModels(),this.initDefaultUIs(),this.initCustomUpdateState(),this.registAllCustomUpdate(),this.onEvents()},e.prototype.initModels=function(){v.default.init(),c.default.init(this.node.getChildByName("UI")),u.default.init(),h.default.init(),d.default.init()},e.prototype.onEvents=function(){this.on(s.EventType.DirectorEvent.enterLevel,this.onEnterLevel,this),this.on(s.EventType.DirectorEvent.enterLobby,this.enterGameLobby,this),this.on(s.EventType.DirectorEvent.playerWin,this.onLevelWin,this),this.on(s.EventType.DirectorEvent.playerLose,this.onLevelLose,this),this.on(s.EventType.DirectorEvent.hideGameLobby,this.hideGameLobbyUI,this),this.on(s.EventType.DirectorEvent.chooseTrySkinFinish,this.onChooseTrySkinFinish,this),this.on(s.EventType.UIEvent.showTouchMask,this.showTouchMask,this),this.on(s.EventType.UIEvent.hideTouchMask,this.hideTouchMask,this),this.on(s.EventType.LevelEvent.resurgence,this.onResurgence,this),this.on(s.EventType.GameFlow.enterLevel,this.onEnterGameFlowLevel,this)},e.prototype.registAllCustomUpdate=function(){this.registCustomUpdate(f.GlobalEnum.DirectState.level,this.stepLevelPlaying)},e.prototype.reset=function(){this.levelMng&&this.levelMng.exit(),this.resetTouchMask(),this.resetCustomUpdateState()},e.prototype.loadGameData=function(){var t=this;y.default.loadBundleDir("MainScene","JSONData",function(e){for(var o=[],n=0,i=e.length;n<i;++n)o.push(e[n].name);h.default.setData(e,o),t.emit(s.EventType.DirectorEvent.enterLobby),t.enterCustomUpdateState(f.GlobalEnum.DirectState.lobby)},cc.JsonAsset,!1)},e.prototype.enterGameLobby=function(t){this.levelMng&&this.levelMng.exit(),this.hideUIs(this.levelUIs),this.hideUIs(this.persistUIs),console.log("\u663e\u793aUI lobby"),this.showUI(f.GlobalEnum.UI.lobby),this.enterCustomUpdateState(f.GlobalEnum.DirectState.lobby),t&&t.data&&t.data.enterNextUI&&"shop"==t.data.enterNextUI&&this.emit(s.EventType.UIEvent.enter,f.GlobalEnum.UI.shop)},e.prototype.hideGameLobbyUI=function(){this.hideUIs(this.lobbyUIs),this.hideUIs(this.persistUIs),this.hideUI(f.GlobalEnum.UI.lobby)},e.prototype.onEnterLevel=function(t){this.chosedLevel=t,this.levelMng||this.loadLevelScene(),this.emit(s.EventType.GameFlow.enterLevel)},e.prototype.getCurLevel=function(){return p.default.getData("gameData.curLevel")},e.prototype.showTrySkin=function(){this.pauseLevel(),this.showUI(f.GlobalEnum.UI.trySkin,f.GlobalEnum.GoodsType.playerSkin)},e.prototype.onChooseTrySkinFinish=function(){this.hideUI(f.GlobalEnum.UI.trySkin),this.showTeachAnim()},e.prototype.showTeachAnim=function(){},e.prototype.loadLevelScene=function(){var t=this;y.default.loadBundle("LevelScene",function(){console.log("levelScene\u52a0\u8f7d\u6210\u529f\uff0c\u5f00\u59cb\u52a0\u8f7d\u9884\u5236\u4f53"),y.default.loadBundleDir("LevelScene","MultiplePrefab",function(e){for(var o=e.length-1;o>=0;--o){var n=e[o];m.default.createPool(n.name,n,n.name)}console.log("MultiplePrefab\u52a0\u8f7d\u6210\u529f\uff0c\u5f00\u59cb\u52a0\u8f7d\u5173\u5361\u9884\u5236\u4f53"),y.default.loadBundleRes("LevelScene","SinglePrefab/LevelManager",function(e){if(!t.levelMng){var o=cc.instantiate(e);t.node.getChildByName("LevelManager").addChild(o),t.levelMng=o.getComponent("LevelManager"),t.levelMng.init()}t.onLoadLevelFinish(),y.default.loadBundle("LevelUI",function(){y.default.loadBundleArray("LevelUI",["AwardUI/AwardUI","WinUI/WinUI"],function(){},cc.Prefab,!1)},!1,!1)},cc.Prefab,!0)},cc.Prefab,!0)},!0,!0)},e.prototype.onLoadLevelFinish=function(){this.checkEnterLevelScene()},e.prototype.onEnterGameFlowLevel=function(){this.recommendFlowStepFinish=!0,this.checkEnterLevelScene()},e.prototype.checkEnterLevelScene=function(){this.levelMng&&this.recommendFlowStepFinish&&(this.recommendFlowStepFinish=!1,this.enterLevelScene())},e.prototype.enterLevelScene=function(t){if(this.levelData){var e=this.levelData;this.levelData=null,this.chosedLevel=null,this._enterLevelScene(e)}else{if(void 0===t&&(t=this.chosedLevel?this.chosedLevel:this.getCurLevel()),1==t%2){var o=p.default.getData("gameData.curBoss");if(o==(t+1)/2&&o<=9)return console.log("\u8fdb\u5165Boss\u5173",o),void this._enterLevelScene({lv:0,bossID:o})}console.log("\u8fdb\u5165\u666e\u901a\u5173",t),this.chosedLevel=null,h.default.getLevelData(t,this._enterLevelScene.bind(this))}},e.prototype._enterLevelScene=function(t){this.hideGameLobbyUI(),this.hideUIs(this.levelUIs),this.levelMng.enterLevel(t),this.showUI(f.GlobalEnum.UI.levelInfo,t),this.enterCustomUpdateState(f.GlobalEnum.DirectState.level)},e.prototype.onLevelWin=function(t){t=c.default.getUI(f.GlobalEnum.UI.levelInfo).getData(),this.winData=t,this.updateLevelRecord(t);var e=p.default.getData("gameData.curLevel"),o=p.default.getData("gameData.curBoss");e%2==1&&o<(e+1)/2&&o<9?this.addCurBoss():this.addCurLevel(t),c.default.existUI(f.GlobalEnum.UI.awardUI)?this.emit(s.EventType.UIEvent.enter,f.GlobalEnum.UI.awardUI,this.winData):this.emit(s.EventType.UIEvent.enter,f.GlobalEnum.UI.winUI,this.winData)},e.prototype.addCurLevel=function(){this.emit(s.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.curLevel",value:1,mode:"+"})},e.prototype.addCurBoss=function(){console.log("boss\u5173\u95ef\u5173\u6210\u529f\uff1a"),this.emit(s.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.curBoss",value:1,mode:"+"})},e.prototype.updateLevelRecord=function(t){var e=p.default.getData("gameData.levelRecords");(!e[t.lv]||e[t.lv]<t.star)&&(e[t.lv]=t.star,this.emit(s.EventType.PlayerDataEvent.updatePlayerData,{attribute:"gameData.levelRecords",value:e,mode:"=",save:!0,emit:!1}))},e.prototype.onLevelLose=function(t){t=c.default.getUI(f.GlobalEnum.UI.levelInfo).getData(),this.loseData=t,this.emit(s.EventType.UIEvent.enter,f.GlobalEnum.UI.loseUI,this.loseData)},e.prototype.onResurgence=function(){this.hideUIs(this.lobbyUIs),this.hideUI(f.GlobalEnum.UI.playerAssetBar)},e.prototype.stepLevelPlaying=function(t){this.levelMng.running(t)},r([E(cc.Node)],e.prototype,"bg",void 0),r([E(cc.Node)],e.prototype,"touchMask",void 0),r([E([a.default])],e.prototype,"defaultUIs",void 0),r([b],e)}(a.default);o.default=S,cc._RF.pop()},{"../../Script/Advert/AdvertManager":void 0,"../../Script/Common/Action3dManager":void 0,"../../Script/Common/AudioManager":void 0,"../../Script/Common/GameData":void 0,"../../Script/Common/GlobalPool":void 0,"../../Script/Common/Loader":void 0,"../../Script/Common/PlayerData":void 0,"../../Script/Common/PowerManager":void 0,"../../Script/Common/UIManager":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],GameLobby:[function(t,e,o){"use strict";cc._RF.push(e,"69ef72xiQlAL4AzHd4vX34+","GameLobby");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Script/Common/yyComponent"),s=t("../../Script/GameSpecial/GlobalEnum"),l=t("../../Script/GameSpecial/GameEventType"),c=t("../../Script/Common/PlayerData"),p=t("../../Script/GameSpecial/GameConfig"),u=t("../../Script/Common/Action3dManager"),h=t("../../Script/Common/GameFlow"),d=cc._decorator,y=d.ccclass,f=d.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._uiType=s.GlobalEnum.UI.lobby,e.btnAudio=null,e.audioOpen=null,e.audioClose=null,e.btnStartGame=null,e.chosedLevel=null,e.moreGameTipIcon=null,e.BtnSignIn=null,e.curLevelLabel=null,e.roleSke=null,e.foe=null,e}return i(e,t),Object.defineProperty(e.prototype,"uiType",{get:function(){return this._uiType},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initBtnAudio(),this.onEvents(),this.setCurLevel()},e.prototype.onEvents=function(){this.on(l.EventType.LevelEvent.choseLevelItem,this.onChoseLevelItem,this),this.on(l.EventType.ShopEvent.curSkinChange,this.setSkin,this)},e.prototype.reset=function(){this.stopFoe()},e.prototype.show=function(){this.node.active=!0,this.reset(),this.emit(l.EventType.AudioEvent.stopBGM),this.emit(l.EventType.AudioEvent.playBGM,s.GlobalEnum.AudioClip.BGM,!0),this.playMoreGameTip(),this.playBtnStartGame(),this.setCurLevel(),this.emit(l.EventType.UIEvent.enter,s.GlobalEnum.UI.playerAssetBar),this.updateBtnSignIn(),this.setSkin(),this._showBanner()},e.prototype.hide=function(){this.reset(),this.stopMoreGameTip(),this.stopBtnStartGame(),this.node.active=!1,this._hideBanner()},e.prototype.initBtnAudio=function(){this.btnAudio.node.on("touchend",this.onBtnAudio,this);var t=p.default.audioConfig.bgm;this.btnAudio.spriteFrame=t?this.audioOpen:this.audioClose},e.prototype.onBtnAudio=function(){var t=p.default.audioConfig.bgm,e={bgm:t=!t,effect:t};p.default.audioConfig=e,t?(this.btnAudio.spriteFrame=this.audioOpen,this.emit(l.EventType.AudioEvent.resume)):(this.btnAudio.spriteFrame=this.audioClose,this.emit(l.EventType.AudioEvent.pause))},e.prototype.playBtnStartGame=function(){var t=.97;this.btnStartGame.setScale(t,t),t=1.03;var e=u.default.scaleTo(.5,t,t,t);t=.97;var o=u.default.scaleTo(.5,t,t,t),n=u.default.sequence(e,o),i=u.default.repeatForever(n);u.default.getMng(u.ActionMngType.UI).runAction(this.btnStartGame,i)},e.prototype.stopBtnStartGame=function(){u.default.getMng(u.ActionMngType.UI).stopAllActions(this.btnStartGame)},e.prototype.onBtnStartGame=function(){this.emit(l.EventType.AudioEvent.playClickBtn),this.startGame()},e.prototype.startGame=function(){var t=this.chosedLevel;this.chosedLevel=null,this.emit(l.EventType.DirectorEvent.enterLevel,t)},e.prototype.onBtnChooseLevel=function(){this.emit(l.EventType.AudioEvent.playClickBtn),this.emit(l.EventType.UIEvent.enter,s.GlobalEnum.UI.chooseLevel)},e.prototype.onChoseLevelItem=function(t){this.chosedLevel=t,this.startGame(),this.emit(l.EventType.UIEvent.exit,s.GlobalEnum.UI.chooseLevel)},e.prototype.updateBtnSignIn=function(){var t=c.default.getData("gameData.signIn.allDays");this.BtnSignIn.node.active=!(t>=7)},e.prototype.playMoreGameTip=function(){var t=.9;this.moreGameTipIcon.setScale(t,t,t),t=1.1,u.default.scaleTo(1,t,t,t),t=.9,u.default.scaleTo(1,t,t,t);var e=u.default.rotateTo2d(.1,30),o=u.default.rotateTo2d(.8,0),n=u.default.delay(2);o.easing(u.default.easeElasticOut());var i=u.default.sequence(n,e,o),r=u.default.repeatForever(i);u.default.getMng(u.ActionMngType.UI).runAction(this.moreGameTipIcon,r)},e.prototype.stopMoreGameTip=function(){u.default.getMng(u.ActionMngType.UI).stopAllActions(this.moreGameTipIcon)},e.prototype.onBtnMoreGame=function(){var t=h.default.getConfig("loading").daquandao;this.emit(l.EventType.RecommendEvent.showBigPage,t)},e.prototype.onBtnShop=function(){this.emit(l.EventType.AudioEvent.playClickBtn),this.emit(l.EventType.UIEvent.enter,s.GlobalEnum.UI.shop)},e.prototype.onBtnSignIn=function(){this.emit(l.EventType.AudioEvent.playClickBtn),this.emit(l.EventType.UIEvent.enter,s.GlobalEnum.UI.signIn)},e.prototype.setCurLevel=function(){var t=c.default.getData("gameData.curLevel");this.curLevelLabel.string=t.toString()},e.prototype.setSkin=function(){var t,e=c.default.getData("gameData.PlayerSkin.cur");if(this.roleSke.setAnimation(0,"lv4-2-1",!0),e){var o=e.toString();e<10&&(o="0"+o),t="juesepifu/"+o}else t="default";this.roleSke.setSkin(t),this.playFoe()},e.prototype.playFoe=function(){var t=u.default.delay(.7),e=u.default.moveTo(.1,260,-190),o=u.default.rotateTo2d(.1,-5),n=u.default.moveTo(.1,240,-190),i=u.default.rotateTo2d(.1,0),r=u.default.delay(.3),a=u.default.spawn(e,o),s=u.default.spawn(n,i),l=u.default.sequence(t,a,s,r),c=u.default.repeatForever(l);u.default.getMng(u.ActionMngType.UI).runAction(this.foe,c)},e.prototype.stopFoe=function(){u.default.getMng(u.ActionMngType.UI).stopAllActions(this.foe)},e.prototype._showBanner=function(){this.emit(l.EventType.SDKEvent.showBanner,{style:{horizontal:"middle"}})},e.prototype._hideBanner=function(){this.emit(l.EventType.SDKEvent.hideBanner)},e.prototype._removeBanner=function(){this.emit(l.EventType.SDKEvent.hideBanner)},r([f(cc.Sprite)],e.prototype,"btnAudio",void 0),r([f(cc.SpriteFrame)],e.prototype,"audioOpen",void 0),r([f(cc.SpriteFrame)],e.prototype,"audioClose",void 0),r([f(cc.Node)],e.prototype,"btnStartGame",void 0),r([f(cc.Node)],e.prototype,"moreGameTipIcon",void 0),r([f(cc.Button)],e.prototype,"BtnSignIn",void 0),r([f(cc.Label)],e.prototype,"curLevelLabel",void 0),r([f(sp.Skeleton)],e.prototype,"roleSke",void 0),r([f(cc.Node)],e.prototype,"foe",void 0),r([y],e)}(a.default);o.default=v,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/GameFlow":void 0,"../../Script/Common/PlayerData":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameConfig":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],LevelController:[function(t,e,o){"use strict";cc._RF.push(e,"40bcc/o5rtGMK5aKqyYxbY2","LevelController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Script/Common/yyComponent"),s=t("../../Script/GameSpecial/GameEventType"),l=t("../../Script/GameSpecial/GlobalEnum"),c=cc._decorator,p=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.init(),this.setDisable()},e.prototype.init=function(){this.initComponents(),this.initTouchState(),this.initCustomUpdateState(),this.registAllCustomUpdate(),this.onEvents()},e.prototype.onEvents=function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.on(s.EventType.CtrlEvent.ctrlStart,this.setEnable,this),this.on(s.EventType.CtrlEvent.ctrlEnd,this.setDisable,this)},e.prototype.registAllCustomUpdate=function(){this.registCustomUpdate(l.GlobalEnum.CtrlState.touched,this.stepTouchStay)},e.prototype.reset=function(){this.resetTouchState()},e.prototype.setEnable=function(){this.reset(),this.node.active=!0},e.prototype.setDisable=function(){this.reset(),this.node.active=!1},e.prototype.getTouchData=function(t){return{startTime:this.touchStartTime,stayTime:this.touchStayTime,path:this.touchPath,e:t}},e.prototype.initTouchState=function(){this.touched=!1,this.touchId=-1,this.touchStartTime=-1,this.touchStayTime=0,this.touchPath=[]},e.prototype.resetTouchState=function(){this.touched=!1,this.touchId=-1,this.touchStartTime=-1,this.touchStayTime=0,this.touchPath=[]},e.prototype.onTouchStart=function(t){if(!this.isMultipleTouch(t)){this.touched=!0,this.touchId=t.getID(),this.touchStartTime=Date.now(),this.touchStayTime=0;var e=t.getLocation();this.touchPath[0]=e,this.emit(s.EventType.CtrlEvent.touchStart,this.getTouchData(t)),this.enterCustomUpdateState(l.GlobalEnum.CtrlState.touched)}},e.prototype.onTouchMove=function(t){if(this.isCurTouchEvent(t)){var e=t.getLocation();this.touchPath[1]=e,this.emit(s.EventType.CtrlEvent.touchMove,this.getTouchData(t))}},e.prototype.onTouchEnd=function(t){if(this.isCurTouchEvent(t)){var e=t.getLocation();this.touchPath[1]=e,this.emit(s.EventType.CtrlEvent.touchEnd,this.getTouchData(t)),this.resetTouchState(),this.enterCustomUpdateState(l.GlobalEnum.CtrlState.none)}},e.prototype.isMultipleTouch=function(t){return t.getTouches().length>1},e.prototype.isCurTouchEvent=function(t){return t.getID()==this.touchId},e.prototype.stepTouchStay=function(t){this.touched&&(this.touchStayTime+=t,this.emit(s.EventType.CtrlEvent.touchStay,this.getTouchData(null)))},r([p],e)}(a.default));o.default=u,cc._RF.pop()},{"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],LoadingUI:[function(t,e,o){"use strict";cc._RF.push(e,"326d3l9GUNNN6sC8bQK7+Ik","LoadingUI");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Script/Common/yyComponent"),s=t("../../Script/GameSpecial/GameEventType"),l=cc._decorator,c=l.ccclass,p=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bar=null,e.totalLength=0,e.preRate=0,e}return i(e,t),e.prototype.init=function(){0==this.totalLength&&(this.totalLength=this.bar.getComponent(cc.Sprite).spriteFrame.getOriginalSize().width),this.bar.setPosition(-.5*this.totalLength,this.bar.y),this.preRate=0,this.onEvents()},e.prototype.onEvents=function(){this.on(s.EventType.LoadAssetEvent.showProgress,this.onShowProgress,this),this.on(s.EventType.LoadAssetEvent.updateProgress,this.onUpdateProgress,this),this.on(s.EventType.LoadAssetEvent.hideProgress,this.onHideProgress,this)},e.prototype.onShowProgress=function(t){this.node.active=!0,void 0===t&&(t=0),t<this.preRate&&(t=this.preRate),this.bar.width=this.totalLength*t,this.preRate=t},e.prototype.onUpdateProgress=function(t){1!=t?t>this.preRate&&(this.bar.width=this.totalLength*t,this.preRate=t):this.preRate=0},e.prototype.onHideProgress=function(){this.node.active=!1,this.preRate=0},r([p(cc.Node)],e.prototype,"bar",void 0),r([p],e.prototype,"totalLength",void 0),r([c],e)}(a.default);o.default=u,cc._RF.pop()},{"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0}],PlayerAssetBar:[function(t,e,o){"use strict";cc._RF.push(e,"08b7fQRKfNDVZa5QgqRT/Gw","PlayerAssetBar");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Script/Common/yyComponent"),s=t("../../Script/GameSpecial/GameEventType"),l=t("../../Script/Common/PlayerData"),c=t("../../Script/Common/GlobalPool"),p=t("../../Script/GameSpecial/GlobalEnum"),u=t("../../Script/Common/Action3dManager"),h=cc._decorator,d=h.ccclass,y=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldLabel=null,e.goldLayer=null,e.goldIconPrefab=null,e}return i(e,t),e.prototype.init=function(){this.initComponents(),this.initGoldIcon(),this.onEvents(),this.setData()},e.prototype.onEvents=function(){this.on(s.EventType.PlayerDataEvent.playerDataChanged,this.onPlayerDataChanged,this),this.on(s.EventType.UIEvent.playGoldAnim,this.playGoldAnim,this)},e.prototype.reset=function(){this.resetGoldIcon()},e.prototype.show=function(){this.node.active=!0,this.setData(),this.onEvents()},e.prototype.hide=function(){this.offEvents(),this.node.active=!1},e.prototype.setData=function(){var t=l.default.getData("gameData.asset");this.setGold(t.gold)},e.prototype.convertToString=function(t){return t<1100?t.toString():t<1e6?(.001*t).toFixed(1)+"K":(1e-6*t).toFixed(1)+"M"},e.prototype.onPlayerDataChanged=function(t){switch(t.attribute){case"gameData.asset.gold":this.setGold(t.value)}},e.prototype.setGold=function(t){this.goldLabel.string=this.convertToString(t)},e.prototype.initGoldIcon=function(){var t=this.goldLabel.node.convertToWorldSpaceAR(cc.v2(0,0));t=this.node.convertToNodeSpaceAR(t),this.targetPos=cc.v3(t.x,t.y,0),this.cb=null,c.default.createPool(p.GlobalEnum.LevelPrefab.goldIcon,this.goldIconPrefab)},e.prototype.resetGoldIcon=function(){this.cb=null;for(var t=u.default.getMng(u.ActionMngType.UI),e=this.goldLayer.childrenCount-1;e>=0;--e)t.stopAllActions(this.goldLayer.children[e]);c.default.putAllChildren(this.goldLayer,!0)},e.prototype.playGoldAnim=function(t){this.resetGoldIcon(),this.emit(s.EventType.UIEvent.showTouchMask),this.cb=t.cb;var e=cc.v2();t.startPos&&e.set(t.startPos);for(var o=Math.round(10*Math.random())+20,n=u.default.getMng(u.ActionMngType.UI),i=0;i<o;i++){var r=c.default.get(p.GlobalEnum.LevelPrefab.goldIcon);this.goldLayer.addChild(r),r.setPosition(e),r.setScale(1,1);var a=u.default.moveTo(.2,80*(Math.random()-.5)+e.x,80*(Math.random()-.5)+e.y,0);a.easing(u.default.easeOut(2)),n.runAction(r,a)}this.scheduleOnce(this.toTarget,.2)},e.prototype.toTarget=function(){var t=u.default.getMng(u.ActionMngType.UI),e=.005*this.goldLayer.childrenCount,o=this.goldLabel.node.convertToWorldSpaceAR(cc.v2(0,0));o=this.node.convertToNodeSpaceAR(o);for(var n=this.goldLayer.childrenCount-1;n>=0;--n){var i=u.default.moveTo(.8,o.x,o.y,0),r=u.default.scaleTo(.8,.5,.5,1),a=u.default.spawn(i,r),s=u.default.delay(.005+.005*n),l=u.default.sequence(s,a);t.runAction(this.goldLayer.children[n],l)}this.scheduleOnce(this.playFinish,.8+e)},e.prototype.playFinish=function(){this.emit(s.EventType.UIEvent.hideTouchMask),this.cb?this.cb():this.emit(s.EventType.UIEvent.goldAnimPlayFinish),this.resetGoldIcon()},e.prototype.onBtnGetGold=function(){this.emit(s.EventType.UIEvent.enter,p.GlobalEnum.UI.goldDialog)},r([y(cc.Label)],e.prototype,"goldLabel",void 0),r([y(cc.Node)],e.prototype,"goldLayer",void 0),r([y(cc.Prefab)],e.prototype,"goldIconPrefab",void 0),r([d],e)}(a.default);o.default=f,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/GlobalPool":void 0,"../../Script/Common/PlayerData":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"5224b1/z19JnbPGgAp8qrnA","Player");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../../../Script/GameSpecial/GameEventType"),l=t("../../../Script/GameSpecial/GlobalEnum"),c=t("./CollisComp"),p=t("./Role"),u=cc._decorator,h=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisType=l.GlobalEnum.Collistype.player,e.skinID=1,e.loopAnim=[a.daiji,a.kaixin,a.ku,a.zou],e.rigBody=null,e.isrescue=!1,e.vector=cc.v2(),e}return i(e,t),e.prototype.init=function(){this.onEvents(),this.initSkeleton(),this.playAnima(a.daiji)},e.prototype.reuse=function(){this.onEvents(),this.initSkeleton(),this.playAnima(a.daiji)},e.prototype.unuse=function(){this.isrescue=!1,this.rigBody&&(this.rigBody.linearVelocity=cc.v2()),this.offEvents()},e.prototype.onEvents=function(){this.on(s.EventType.DIYEvent.goalDie,this.goalDie,this)},e.prototype.offEvents=function(){this.off(s.EventType.DIYEvent.goalDie,this.goalDie,this)},e.prototype.goalDie=function(){var t=this;this.customStep=this.stepEmpty,this.playAnima(a.ku),setTimeout(function(){t.emit(s.EventType.DIYEvent.loss)},1e3)},e.prototype.setData=function(t){this.skinID=t.skinID,this.setSkin(this.skinID)},e.prototype.reset=function(){},e.prototype.startAction=function(){this.customStep=this.dtUp},e.prototype.roleDie=function(){this.customStep=this.stepEmpty,this.playAnima(a.siwang),this.emit(s.EventType.DIYEvent.loss)},e.prototype.direcStone=function(t){var e=t.body.linearVelocity;e.lengthSqr()>=1e5&&e.y<-1e3&&this.roleDie()},e.prototype.victory=function(){this.customStep=this.stepEmpty,this.playAnima(a.kaixin),this.emit(s.EventType.DIYEvent.win)},e.prototype.onBeginContact=function(t,e,o){var n=o.node.getComponent(c.default);if(n)switch(n.collisType){case l.GlobalEnum.Collistype.smoke:case l.GlobalEnum.Collistype.magma:case l.GlobalEnum.Collistype.gas:case l.GlobalEnum.Collistype.foe:n.isDie||1!=e.tag||this.roleDie();break;case l.GlobalEnum.Collistype.stone:n.isDie||2==e.tag||this.direcStone(o);break;case l.GlobalEnum.Collistype.goal:this.victory()}},e.prototype.dtUp=function(){var t=this.node.getComponent(cc.RigidBody).linearVelocity;t.lengthSqr()>100?(this.playAnima(a.zou),t.x<0?this.node.scaleX=-1:this.node.scaleX=1):this.playAnima(a.daiji),this.isrescue&&(this.rigBody||(this.rigBody=this.node.getComponent(cc.RigidBody)),this.rigBody.applyForceToCenter(this.vector.mul(2e3).add(cc.v2(0,3e3)),!0))},e.prototype.rescue=function(t){this.isrescue=!0,this.vector=t.normalize()},r([h],e)}(p.default));o.default=d,function(t){t.daiji="daiji",t.kaixin="kaixin",t.ku="ku",t.zou="zou",t.siwang="siwang"}(a||(a={})),cc._RF.pop()},{"../../../Script/GameSpecial/GameEventType":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0,"./CollisComp":"CollisComp","./Role":"Role"}],Role:[function(t,e,o){"use strict";cc._RF.push(e,"54407cFO4lJWbB2dfMpkqsd","Role");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Script/GameSpecial/GameEventType"),s=t("../../../Script/GameSpecial/GlobalEnum"),l=t("./CollisComp"),c=cc._decorator,p=c.ccclass,u=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=s.GlobalEnum.CollisGroup.role,e.skinID=null,e.isDie=!1,e.role=null,e.skeleton=null,e.loopAnim=[],e}return i(e,t),e.prototype.init=function(){this.initSkeleton()},e.prototype.reuse=function(){this.initSkeleton()},e.prototype.unuse=function(){},e.prototype.reset=function(){},e.prototype.startAction=function(){},e.prototype.initSkeleton=function(){this.skeleton||(this.skeleton=this.role.getComponent(sp.Skeleton)),this.setSkin(this.skinID)},e.prototype.playAnima=function(t){if(this.skeleton||(this.skeleton=this.role.getComponent(sp.Skeleton)),this.skeleton.animation!==t){"zou"==t&&this.emit(a.EventType.AudioEvent.playEffect,s.GlobalEnum.AudioClip.step);var e;e=this.loopAnim.indexOf(t)>=0,this.skeleton.setAnimation(0,t,e)}},e.prototype.setSkin=function(t){var e;if(t){this.skinID=t;var o=t.toString();t<10&&(o="0"+o),e="juesepifu/"+o}else this.skinID=null,e="default";this.skeleton.setSkin(e)},e.prototype._getMapData=function(){return{}},r([u(cc.Node)],e.prototype,"role",void 0),r([p],e)}(l.default);o.default=h,cc._RF.pop()},{"../../../Script/GameSpecial/GameEventType":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0,"./CollisComp":"CollisComp"}],TipMessage:[function(t,e,o){"use strict";cc._RF.push(e,"fa03fEKcf5HdqLeM7wO+JGh","TipMessage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Script/Common/yyComponent"),s=t("../../Script/Common/Action3dManager"),l=t("../../Script/GameSpecial/GameEventType"),c=cc._decorator,p=c.ccclass,u=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg=null,e.action=null,e}return i(e,t),e.prototype.init=function(){this.node=this.node;var t=s.default.delay(.01),e=s.default.fadeTo(0,255),o=s.default.delay(1),n=s.default.fadeTo(.5,0),i=s.default.callFun(this.onFadeOut,this),r=s.default.sequence(t,e,o,n,i);this.action=r,this.setMsg(""),this.onEvents()},e.prototype.onEvents=function(){this.on(l.EventType.UIEvent.showTip,this.show,this)},e.prototype.reset=function(){this.node.opacity=0},e.prototype.show=function(t){this.node.active=!0,this.reset(),this.setMsg(t),s.default.getMng(s.ActionMngType.UI).runAction(this.node,this.action)},e.prototype.hide=function(){this.node.active=!1},e.prototype.setMsg=function(t){this.msg.string=t},e.prototype.onFadeOut=function(){this.hide()},r([u(cc.Label)],e.prototype,"msg",void 0),r([p],e)}(a.default);o.default=h,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0}]},{},["GameDirector","GameLobby","LevelController","LoadingUI","PlayerAssetBar","TipMessage","CollisComp","Player","Role"]);