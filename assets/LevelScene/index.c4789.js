window.__require=function t(e,o,i){function n(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var p=o[s]={exports:{}};e[s][0].call(p.exports,function(t){return n(e[s][1][t]||t)},p,p.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({BackGround:[function(t,e,o){"use strict";cc._RF.push(e,"6d1d7FVCDVF162Jc2SNFZAS","BackGround");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/Common/Loader"),a=t("../../../Script/GameSpecial/GlobalEnum"),l=t("../../plygonRender/PlygonRender"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=a.GlobalEnum.CollisGroup.ground,e.collisType=a.GlobalEnum.Collistype.backWall,e.backWall=null,e.backWallScr=null,e}return n(e,t),e.prototype.init=function(){this.backWallScr.init()},e.prototype.reset=function(){this.backWallScr.reset()},e.prototype.setData=function(t){var e=this;t.size&&(this.node.width=t.size[0],this.node.height=t.size[1]),t.spriteFrame&&c.default.loadBundle("ImgTexture",function(){c.default.loadBundleRes("ImgTexture","bg/"+t.spriteFrame,function(t){t?e.node.getComponent(cc.Sprite).spriteFrame=t:console.log("\u80cc\u666f\u52a0\u8f7d\u9519\u8bef\uff01")},cc.SpriteFrame,!0)},!0,!0),t.data&&(console.log(t.data),this.setBackWall(t.data))},e.prototype.setBackWall=function(t){this.backWallScr.setData(t)},e.prototype._getMapData=function(){var t={};return t.size=[this.node.width,this.node.height],t.spriteFrame=this.node.getComponent(cc.Sprite).spriteFrame.name,t.data=this.getBackWallPoint(),t},e.prototype.getBackWallPoint=function(){for(var t=this.backWall.children,e={},o=[],i=0;i<t.length;i++){var n=t[i];e[n.name]=[n.x,n.y]}for(i=0;i<t.length;i++)o.push(e[i+1]);return o},r([h(cc.Node)],e.prototype,"backWall",void 0),r([h(l.default)],e.prototype,"backWallScr",void 0),r([u],e)}(s.default);o.default=f,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/Common/Loader":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0,"../../plygonRender/PlygonRender":"PlygonRender"}],BossLevelScr1:[function(t,e,o){"use strict";cc._RF.push(e,"2e821JLEfRFJagZe14I5g8U","BossLevelScr1");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/Action3dManager"),c=t("./BossLevelScr"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["lv1-1-1"],e.allAnim={},e.clip=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.initClip(),this.playAnima("lv1-1-1")},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){1==t&&this.choose1()},e.prototype.initClip=function(){this.clip.setPosition(cc.v2(250,-120)),this.clip.active=!1},e.prototype.choose1=function(){this.moveClip()},e.prototype.moveClip=function(){this.clip.active=!0;var t=s.default.moveTo(1,95,-120),e=s.default.callFun(this.playNext,this),o=s.default.sequence(t,e);s.default.getMng(s.ActionMngType.UI).runAction(this.clip,o)},e.prototype.playNext=function(){var t=this;this.clip.active=!1,this.playAnima("lv1-1-2"),setTimeout(function(){t.playAnima("kaixin"),setTimeout(function(){t.win()},750)},700)},r([p(cc.Node)],e.prototype,"clip",void 0),r([l],e)}(c.default);o.default=u,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"./BossLevelScr":"BossLevelScr"}],BossLevelScr2:[function(t,e,o){"use strict";cc._RF.push(e,"b003b+RdtREApiD/AXgLIGf","BossLevelScr2");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/Action3dManager"),c=t("./BossLevelScr"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["daiji"],e.allAnim={},e.key=null,e.ironDoor=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.initKey(),this.playAnima("daiji")},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){1==t?this.choose1():this.choose2()},e.prototype.initKey=function(){this.key.setPosition(cc.v2(200,-220)),this.key.setScale(cc.v2(.2,.2)),this.key.active=!1},e.prototype.choose1=function(){var t=this;this.playAnima("lv2-1-1"),setTimeout(function(){t.playAnima1(),setTimeout(function(){t.playAnima("daiji")},800)},700)},e.prototype.playAnima1=function(){this.key.active=!0;var t=s.default.scaleTo(.2,1,1),e=s.default.moveTo(1,-100,-170),o=s.default.callFun(this.ironCageMove,this),i=s.default.sequence(t,e,o);s.default.getMng(s.ActionMngType.UI).runAction(this.key,i)},e.prototype.ironCageMove=function(){this.key.active=!1;var t=s.default.moveTo(1,-230,120),e=s.default.callFun(this.playNext,this),o=s.default.sequence(t,e);s.default.getMng(s.ActionMngType.UI).runAction(this.ironDoor,o)},e.prototype.playNext=function(){var t=this;this.playAnima("kaixin"),setTimeout(function(){t.win()},750)},e.prototype.choose2=function(){var t=this;this.playAnima("lv2-2-1"),setTimeout(function(){t.playAnima1(),setTimeout(function(){t.playAnima("daiji")},1e3)},500)},r([p(cc.Node)],e.prototype,"key",void 0),r([p(cc.Node)],e.prototype,"ironDoor",void 0),r([l],e)}(c.default);o.default=u,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"./BossLevelScr":"BossLevelScr"}],BossLevelScr3:[function(t,e,o){"use strict";cc._RF.push(e,"5db65nmfrhE3oKnn9wtaDGo","BossLevelScr3");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/Action3dManager"),c=t("./BossLevelScr"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["daiji","ku","zou"],e.allAnim={},e.guohe=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.initguohe(),this.playAnima("daiji")},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){this.guohe.node.active=!0,1==t?this.choose1():this.choose2()},e.prototype.initguohe=function(){this.guohe.node.active=!1},e.prototype.choose1=function(){var t=this;this.guohe.setAnimation(0,"1-1-1",!1),setTimeout(function(){t.playAnima("ku"),setTimeout(function(){t.lose()},1e3)},700)},e.prototype.playNext=function(){var t=this;this.playAnima("kaixin"),setTimeout(function(){t.win()},750)},e.prototype.choose2=function(){var t=this;this.guohe.setAnimation(0,"1-2-1",!1),setTimeout(function(){t.guohe.setAnimation(0,"1-2-2",!1),setTimeout(function(){t.playerMove()},500)},1500)},e.prototype.playerMove=function(){this.playAnima("zou");var t=s.default.moveTo(1,-60,-175),e=s.default.moveTo(1,200,-240),o=s.default.callFun(this.playNext,this),i=s.default.sequence(t,e,o);s.default.getMng(s.ActionMngType.UI).runAction(this.role,i)},r([p(sp.Skeleton)],e.prototype,"guohe",void 0),r([l],e)}(c.default);o.default=u,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"./BossLevelScr":"BossLevelScr"}],BossLevelScr4:[function(t,e,o){"use strict";cc._RF.push(e,"d6dc0ty86dMlLb1AHFBGtN+","BossLevelScr4");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/Action3dManager"),c=t("./BossLevelScr"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["daiji"],e.allAnim={},e.zhizhu=null,e.cangyin=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.initzhihzu(),this.playAnima("daiji")},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){1==t?this.choose1():this.choose2()},e.prototype.initzhihzu=function(){this.zhizhu.setAnimation(0,"1-1-1",!0),this.cangyin.active=!1},e.prototype.choose1=function(){var t=this;this.playAnima("lv4-1-1"),setTimeout(function(){t.playAnima("daiji"),t.zhizhu.setAnimation(0,"1-2-1",!1),setTimeout(function(){t.zhizhu.setAnimation(0,"1-3-1",!1),setTimeout(function(){t.playAnima("siwang"),setTimeout(function(){t.lose()},1e3)},700)},3e3)},1e3)},e.prototype.playNext=function(){var t=this;this.playAnima("kaixin"),setTimeout(function(){t.win()},750)},e.prototype.choose2=function(){var t=this;this.playAnima("lv4-2-1"),setTimeout(function(){t.playAnima("daiji"),t.cangyinMove(),setTimeout(function(){t.zhizhu.setAnimation(0,"2-1-1",!1)},500)},1e3)},e.prototype.cangyinMove=function(){this.cangyin.active=!0;var t=s.default.moveTo(2,450,350),e=s.default.callFun(this.playNext,this),o=s.default.sequence(t,e);s.default.getMng(s.ActionMngType.UI).runAction(this.cangyin,o)},r([p(sp.Skeleton)],e.prototype,"zhizhu",void 0),r([p(cc.Node)],e.prototype,"cangyin",void 0),r([l],e)}(c.default);o.default=u,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"./BossLevelScr":"BossLevelScr"}],BossLevelScr5:[function(t,e,o){"use strict";cc._RF.push(e,"b72a11Dm+hDZL6D+2x2yfdv","BossLevelScr5");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BossLevelScr"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["daiji","kaixin"],e.allAnim={},e.haiyao=null,e.tupian=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.inithaiyao(),this.playAnima("daiji")},e.prototype.reset=function(){this.offEvents(),this.tupian.active=!1},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){1==t?this.choose1():this.choose2()},e.prototype.inithaiyao=function(){this.haiyao.setAnimation(0,"1-1-1",!0),this.tupian.active=!1},e.prototype.choose1=function(){var t=this;this.playAnima("lv5-1-1"),setTimeout(function(){t.playAnima("daiji"),t.tupian.active=!0,setTimeout(function(){t.haiyao.setAnimation(0,"1-1-2",!0),setTimeout(function(){t.playAnima("kaixin"),setTimeout(function(){t.win()},1e3)},1e3)},500)},800)},e.prototype.choose2=function(){var t=this;this.playAnima("lv5-2-1"),setTimeout(function(){t.haiyao.setAnimation(0,"1-2-1",!1),setTimeout(function(){t.playAnima("lv5-2-2"),t.haiyao.setAnimation(0,"1-2-2",!0),setTimeout(function(){t.lose()},1e3)},500)},1500)},r([l(sp.Skeleton)],e.prototype,"haiyao",void 0),r([l(cc.Node)],e.prototype,"tupian",void 0),r([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./BossLevelScr":"BossLevelScr"}],BossLevelScr6:[function(t,e,o){"use strict";cc._RF.push(e,"f1c79TWgNhP04GLjnrq5bVC","BossLevelScr6");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BossLevelScr"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["daiji","kaixin"],e.allAnim={},e.tree=null,e.trees=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.inittree(),this.playAnima("daiji")},e.prototype.reset=function(){this.offEvents(),this.trees.active=!0},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){1==t?this.choose1():this.choose2()},e.prototype.inittree=function(){this.tree.node.active=!1,this.trees.active=!0},e.prototype.choose1=function(){var t=this;this.playAnima("lv6-1-1"),setTimeout(function(){t.playAnima("daiji"),t.tree.node.active=!0,t.trees.active=!1,t.tree.setAnimation(0,"1-1-1",!1),setTimeout(function(){t.playAnima("kaixin"),setTimeout(function(){t.win()},1e3)},5e3)},1500)},e.prototype.choose2=function(){var t=this;this.playAnima("lv6-2-1"),setTimeout(function(){t.playAnima("daiji"),t.tree.node.active=!0,t.trees.active=!1,t.tree.setAnimation(0,"1-2-1",!1),setTimeout(function(){t.playAnima("siwang"),setTimeout(function(){t.lose()},1e3)},3800)},1500)},r([l(sp.Skeleton)],e.prototype,"tree",void 0),r([l(cc.Node)],e.prototype,"trees",void 0),r([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./BossLevelScr":"BossLevelScr"}],BossLevelScr7:[function(t,e,o){"use strict";cc._RF.push(e,"4be34Tc0odNBbLiSrXI/QG7","BossLevelScr7");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/Action3dManager"),c=t("./BossLevelScr"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["daiji","kaixin","ku"],e.allAnim={},e.nongmin=null,e.bianfu=null,e.candle=null,e.light=null,e.radio=null,e.bianfus=[],e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.initscene(),this.playAnima("daiji")},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){1==t?this.choose1():this.choose2()},e.prototype.initscene=function(){this.nongmin.setAnimation(0,"1-1-1",!0),this.bianfu.setPosition(cc.v2(45,50)),this.candle.active=!1,this.radio.active=!1},e.prototype.choose1=function(){var t=this;this.playAnima("lv7-1-1"),setTimeout(function(){t.playAnima("daiji"),t.candle.active=!0,t.light.active=!0,setTimeout(function(){t.moveBianfu()},1e3)},1e3)},e.prototype.moveBianfu=function(){var t=s.default.moveTo(.5,0,-95),e=s.default.callFun(this.lightOver,this),o=s.default.sequence(t,e);s.default.getMng(s.ActionMngType.UI).runAction(this.bianfu,o)},e.prototype.lightOver=function(){var t=this;this.light.active=!1,setTimeout(function(){t.playAnima("ku"),setTimeout(function(){t.lose()},1e3)},500)},e.prototype.choose2=function(){var t=this;this.playAnima("lv7-2-1"),setTimeout(function(){t.playAnima("daiji"),t.radio.active=!0,setTimeout(function(){t.bianfuLevel()},500)},1e3)},e.prototype.bianfuLevel=function(){for(var t=this,e=0;e<this.bianfus.length;e++)this._moveBianfu(this.bianfus[e]);setTimeout(function(){t.nongmin.setAnimation(0,"1-2-1",!1),setTimeout(function(){t.playAnima("kaixin"),setTimeout(function(){t.win()},1e3)},4e3)},1e3)},e.prototype._moveBianfu=function(t){var e=s.default.moveTo(1,t.x,1e3);s.default.getMng(s.ActionMngType.UI).runAction(t,e)},r([p(sp.Skeleton)],e.prototype,"nongmin",void 0),r([p(cc.Node)],e.prototype,"bianfu",void 0),r([p(cc.Node)],e.prototype,"candle",void 0),r([p(cc.Node)],e.prototype,"light",void 0),r([p(cc.Node)],e.prototype,"radio",void 0),r([p([cc.Node])],e.prototype,"bianfus",void 0),r([l],e)}(c.default);o.default=u,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"./BossLevelScr":"BossLevelScr"}],BossLevelScr8:[function(t,e,o){"use strict";cc._RF.push(e,"462fdM9IepBqYHs1Q8PyVF0","BossLevelScr8");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BossLevelScr"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["daiji","kaixin","ku"],e.allAnim={},e.binkuai=null,e.tupian=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.initscene(),this.playAnima("daiji")},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){1==t?this.choose1():this.choose2()},e.prototype.initscene=function(){this.binkuai.node.active=!1,this.tupian.active=!0},e.prototype.choose1=function(){var t=this;this.playAnima("lv8-1-1"),setTimeout(function(){t.tupian.active=!1,t.binkuai.node.active=!0,t.binkuai.setAnimation(0,"1-1-1",!1),setTimeout(function(){t.playAnima("ku"),setTimeout(function(){t.lose()},500)},1e3)},1500)},e.prototype.choose2=function(){var t=this;this.playAnima("lv8-2-1"),setTimeout(function(){t.tupian.active=!1,t.binkuai.node.active=!0,t.binkuai.setAnimation(0,"1-2-1",!1),setTimeout(function(){t.playAnima("kaixin"),setTimeout(function(){t.win()},1e3)},1e3)},1500)},r([l(sp.Skeleton)],e.prototype,"binkuai",void 0),r([l(cc.Node)],e.prototype,"tupian",void 0),r([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./BossLevelScr":"BossLevelScr"}],BossLevelScr9:[function(t,e,o){"use strict";cc._RF.push(e,"be7b3a+BeFCI6Lr/4e7IVZI","BossLevelScr9");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/Action3dManager"),c=t("../../Script/GameSpecial/GameEventType"),a=t("../../Script/GameSpecial/GlobalEnum"),l=t("./BossLevelScr"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=["daiji","kaixin"],e.allAnim={},e.gou=null,e.mao=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init(),this.initscene(),this.playAnima("daiji")},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onBtnChoose=function(t){1==t?this.choose1():this.choose2()},e.prototype.initscene=function(){this.gou.setAnimation(0,"1-1",!0),this.mao.active=!1},e.prototype.choose1=function(){var t=this;this.gou.setAnimation(0,"1-2",!1),setTimeout(function(){t.gou.setAnimation(0,"1-3",!1),t.emit(c.EventType.AudioEvent.playEffect,a.GlobalEnum.AudioClip.kan),setTimeout(function(){t.playAnima("siwang"),setTimeout(function(){t.lose()},500)},500)},2e3)},e.prototype.choose2=function(){var t=this;this.maoMove(),setTimeout(function(){t.gouMove(),setTimeout(function(){t.playAnima("kaixin"),setTimeout(function(){t.win()},1e3)},2e3)},1800)},e.prototype.maoMove=function(){this.mao.active=!0;var t=s.default.rotateTo2d(.5,20),e=s.default.moveTo(3,600,100),o=s.default.sequence(t,e);s.default.getMng(s.ActionMngType.UI).runAction(this.mao,o)},e.prototype.gouMove=function(){this.gou.node.scaleX=-.5;var t=s.default.moveTo(3,600,-315),e=s.default.sequence(t);s.default.getMng(s.ActionMngType.UI).runAction(this.gou.node,e)},r([h(sp.Skeleton)],e.prototype,"gou",void 0),r([h(cc.Node)],e.prototype,"mao",void 0),r([u],e)}(l.default);o.default=f,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0,"./BossLevelScr":"BossLevelScr"}],BossLevelScr:[function(t,e,o){"use strict";cc._RF.push(e,"bc1c0VdAuVIsaTJFnAJJJEk","BossLevelScr");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/yyComponent"),c=t("../../Script/GameSpecial/GameEventType"),a=t("./BossUI"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loopAnim=[],e.allAnim={},e.lv=2,e.role=null,e.skeleton=null,e.levelUI=null,e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.levelUI.init()},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.lv=t.lv,this.levelUI.setData(t)},e.prototype.onEvents=function(){this.on(c.EventType.DIYEvent.BossUIChoose,this.onBtnChoose,this)},e.prototype.offEvents=function(){this.off(c.EventType.DIYEvent.BossUIChoose,this.onBtnChoose,this)},e.prototype.onBtnChoose=function(t){console.log("\u9009\u62e9\uff1a",t)},e.prototype.initSkeleton=function(){this.skeleton||(this.skeleton=this.role.getComponent(sp.Skeleton)),this.setSkin(2)},e.prototype.playAnima=function(t){if(this.skeleton||(this.skeleton=this.role.getComponent(sp.Skeleton)),this.skeleton.animation!==t){var e;e=this.loopAnim.indexOf(t)>=0,this.skeleton.setAnimation(0,t,e)}},e.prototype.setSkin=function(t){var e;if(t){var o=t.toString();t<10&&(o="0"+o),e="juesepifu/"+o}else e="default";this.skeleton.setSkin(e)},e.prototype.win=function(){var t=this;this.levelUI.animPlay(),setTimeout(function(){t.emit(c.EventType.LevelEvent.testWin)},1e3)},e.prototype.lose=function(){var t=this;setTimeout(function(){t.emit(c.EventType.LevelEvent.testLose)},1e3)},r([u(cc.Node)],e.prototype,"role",void 0),r([u(a.default)],e.prototype,"levelUI",void 0),r([p],e)}(s.default);o.default=h,cc._RF.pop()},{"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"./BossUI":"BossUI"}],BossUI:[function(t,e,o){"use strict";cc._RF.push(e,"5f1e1WDwL1D55uF9QHIMXBd","BossUI");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/Action3dManager"),c=t("../../Script/Common/yyComponent"),a=t("../../Script/GameSpecial/GameEventType"),l=t("./FinishAnim"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelData=null,e.lv=0,e.lvLab=null,e.finish=null,e.chooses=[],e.isDown=!1,e}return n(e,t),e.prototype.init=function(){this.onEvents(),this.isDown=!1,this.hideBtn()},e.prototype.reset=function(){this.offEvents(),this.isDown=!1,this.hideBtn()},e.prototype.setData=function(t){this.onEvents(),this.levelData=t,this.lv=this.levelData.lv,this.startGame()},e.prototype.startGame=function(){var t=this;setTimeout(function(){t.showChoose()},1e3)},e.prototype.setLv=function(){this.lvLab.string=this.lv.toString()},e.prototype.animPlay=function(){this.finish.play()},e.prototype.showChoose=function(){this.showBtn();for(var t=0;t<this.chooses.length;t++)this.chooses[t].setScale(cc.v2(.1,.1));for(t=0;t<this.chooses.length;t++)this.madeAnima1(this.chooses[t])},e.prototype.madeAnima1=function(t){var e=s.default.scaleTo(.5,1.2,1.2),o=s.default.scaleTo(.1,1,1),i=s.default.sequence(e,o);s.default.getMng(s.ActionMngType.UI).runAction(t,i)},e.prototype.onBtn=function(t,e){this.isDown||(this.isDown=!0,this.emit(a.EventType.DIYEvent.BossUIChoose,e),this.hideChoose())},e.prototype.hideChoose=function(){for(var t=0;t<this.chooses.length;t++)this.madeAnima2(this.chooses[t])},e.prototype.madeAnima2=function(t){var e=s.default.scaleTo(.5,.2,.2),o=s.default.callFun(this.hideBtn,this),i=s.default.sequence(e,o);s.default.getMng(s.ActionMngType.UI).runAction(t,i)},e.prototype.showBtn=function(){for(var t=0;t<this.chooses.length;t++)this.chooses[t].active=!0},e.prototype.hideBtn=function(){for(var t=0;t<this.chooses.length;t++)this.chooses[t].active=!1},r([h(cc.Label)],e.prototype,"lvLab",void 0),r([h(l.default)],e.prototype,"finish",void 0),r([h([cc.Node])],e.prototype,"chooses",void 0),r([u],e)}(c.default);o.default=f,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"./FinishAnim":"FinishAnim"}],Brick:[function(t,e,o){"use strict";cc._RF.push(e,"8ab2dOgnyNPZ4gRRFUXEhjV","Brick");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/GameSpecial/GlobalEnum"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=c.GlobalEnum.CollisGroup.ground,e.collisType=c.GlobalEnum.Collistype.brick,e.box=null,e}return n(e,t),e.prototype.init=function(){this.initBox()},e.prototype.reuse=function(){},e.prototype.unuse=function(){this.reset()},e.prototype.reset=function(){},e.prototype.setData=function(t){t.size&&(this.node.width=t.size[0],this.node.height=t.size[1]),t.angle&&(this.node.angle=t.angle),this.resetCollisDirecs(),this.updateWidget()},e.prototype.initBox=function(){this.box||(this.box=this.node.getComponent(cc.PhysicsBoxCollider))},e.prototype.resetCollisDirecs=function(){this.initBox(),this.box.size=cc.size(this.node.width,this.node.height),this.box.offset=cc.v2(0,0),this.box.apply()},e.prototype._getMapData=function(){var t={};return t.size=[this.node.width,this.node.height],t.angle=this.node.angle,t},r([l],e)}(s.default));o.default=p,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0}],Faucet:[function(t,e,o){"use strict";cc._RF.push(e,"756185OtQ5Gu7mB1uNX0eTL","Faucet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,c=t("../../MainScene/Script/role/CollisComp"),a=t("../../Script/Common/GlobalPool"),l=t("../../Script/GameSpecial/GlobalEnum");(function(t){t[t.box=0]="box"})(s||(s={}));var p=cc._decorator,u=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=l.GlobalEnum.CollisGroup.fluid,e.FluidParticle=[],e.particleName="FluidParticle",e.particleNum=0,e.particleInterval=20,e.plies=0,e.remainder=0,e.arrangementType=s.box,e.indexArr=[],e}return n(e,t),e.prototype.init=function(){this.initFluidPool()},e.prototype.reuse=function(){},e.prototype.unuse=function(){this.reset()},e.prototype.reset=function(){this.putAllIndexArr()},e.prototype.setData=function(t){t.particleName&&(this.particleName=t.particleName),t.particleNum&&(this.particleNum=t.particleNum),t.particleInterval&&(this.particleInterval=2*t.particleInterval),t.arrangementType&&(this.arrangementType=t.arrangementType),this.initFluidLiving()},e.prototype.putAllIndexArr=function(){this.node.removeAllChildren(),this.indexArr=[]},e.prototype.initFluidPool=function(){for(var t=0;t<this.FluidParticle.length;t++)a.default.createPool(this.FluidParticle[t].name,this.FluidParticle[t],this.FluidParticle[t].name)},e.prototype.initFluidLiving=function(){var t=this.plies*this.plies+this.remainder;this.particleNum!=t&&this.reComputePlies(),this.arrangeFluid()},e.prototype.arrangeFluid=function(){for(var t=(this.plies+1)/2,e=this.particleInterval*(t-1),o=cc.v2(0,0).sub(cc.v2(e,e)),i=0;i<this.plies;i++)for(var n=0;n<this.plies;n++){var r=a.default.get(this.particleName);this.node.addChild(r);var s=o.add(cc.v2(this.particleInterval*n,this.particleInterval*i));r.setPosition(s),this.indexArr.push(r)}},e.prototype.reComputePlies=function(){this.particleNum>=0?(this.plies=Math.floor(Math.sqrt(this.particleNum)),0!=this.plies&&this.plies%2==0&&this.plies--,this.remainder=this.particleNum-this.plies*this.plies):console.error("\u7c92\u5b50\u6570\u76ee\u4e3a\u8d1f\u6570\uff1a"+this.particleNum+",\u8ba1\u7b97\u65e0\u6cd5\u8fdb\u884c\u3002")},e.prototype._getMapData=function(){var t={};return t.particleName=this.particleName,t.particleNum=this.particleNum,t.particleInterval=this.particleInterval,t.arrangementType=this.arrangementType,t},r([h([cc.Prefab])],e.prototype,"FluidParticle",void 0),r([h({tooltip:"\u5b9e\u4f8b\u5316\u7c92\u5b50\u540d\u79f0"})],e.prototype,"particleName",void 0),r([h({type:cc.Integer,displayName:"\u7c92\u5b50\u6570\u76ee",tooltip:"\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u6574\u6570\u7684\u5e73\u65b9\u53ef\u663e\u793a\u7684\u6574\u9f50\u4e00\u70b9"})],e.prototype,"particleNum",void 0),r([h({type:cc.Float,tooltip:"\u7c92\u5b50\u6392\u5217\u95f4\u8ddd\uff0c\u6ce8\u610f\u6700\u597d\u662f\u5927\u4e8e\u4e24\u500d\u7c92\u5b50\u534a\u5f84"})],e.prototype,"particleInterval",void 0),r([h({type:cc.Enum(s),displayName:"\u7c92\u5b50\u6392\u5217\u65b9\u5f0f"})],e.prototype,"arrangementType",void 0),r([u],e)}(c.default);o.default=f,cc._RF.pop()},{"../../MainScene/Script/role/CollisComp":void 0,"../../Script/Common/GlobalPool":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],FinishAnim:[function(t,e,o){"use strict";cc._RF.push(e,"6a752cv30BA9oox6X7eYCOk","FinishAnim");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/GlobalPool"),c=t("../../Script/Common/Action3dManager"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.imgs=[],e.minScale=.5,e.maxScale=2,e.minAngle=0,e.maxAngle=180,e.minSkew=0,e.maxSkew=5,e.duration=1,e.minSpd=1500,e.maxSpd=2500,e.gravity=-3e3,e.count=100,e.particles=[],e.index=0,e.finishCallFun=null,e}return n(e,t),e.prototype.addItem=function(){this.index++,this.index>=this.imgs.length&&(this.index=0);var t=s.default.get(this.prefab.name);t.getComponent(cc.Sprite).spriteFrame=this.imgs[this.index];var e=this.randomScope(this.minScale,this.maxScale),o=this.randomScope(this.minAngle,this.maxAngle);t.setScale(e),t.angle=o;var i=this.duration,n=c.default.scaleTo(i,this.randomScope(this.minScale,this.maxScale),this.randomScope(this.minScale,this.maxScale),1),r=c.default.rotateTo2d(i,this.randomScope(this.minAngle,this.maxAngle)),a=c.default.spawn(n,r);c.default.getMng(c.ActionMngType.UI).runAction(t,a);var l=cc.v2(),p=this.minSpd+Math.random()*(this.maxSpd-this.minSpd),u=3.14*(.5*Math.random()+.25);l.x=p*Math.cos(u),l.y=p*Math.sin(u),this.particles.push(new h(t,l,this.gravity)),t.setPosition(0,0),this.node.addChild(t)},e.prototype.randomScope=function(t,e){return t+Math.random()*(e-t)},e.prototype.play=function(t){t&&(this.finishCallFun=t);var e=this.count;s.default.createPool(this.prefab.name,this.prefab),s.default.preCreate(this.prefab.name,e);for(var o=0;o<this.count;++o)this.addItem();this.schedule(this.step,.016)},e.prototype.step=function(){for(var t=this.particles.length-1;t>=0;--t)this.particles[t].update(.016),this.particles[t].finished&&(s.default.put(this.particles[t].node),this.particles.splice(t,1));0==this.particles.length&&this.onFinish()},e.prototype.onFinish=function(){if(this.unscheduleAllCallbacks(),this.finishCallFun){var t=this.finishCallFun;this.finishCallFun=null,t()}},r([p(cc.Prefab)],e.prototype,"prefab",void 0),r([p([cc.SpriteFrame])],e.prototype,"imgs",void 0),r([p(cc.Integer)],e.prototype,"minScale",void 0),r([p(cc.Integer)],e.prototype,"maxScale",void 0),r([p(cc.Integer)],e.prototype,"minAngle",void 0),r([p(cc.Integer)],e.prototype,"maxAngle",void 0),r([p(cc.Integer)],e.prototype,"minSkew",void 0),r([p(cc.Integer)],e.prototype,"maxSkew",void 0),r([p(cc.Integer)],e.prototype,"duration",void 0),r([p(cc.Integer)],e.prototype,"minSpd",void 0),r([p(cc.Integer)],e.prototype,"maxSpd",void 0),r([p(cc.Integer)],e.prototype,"gravity",void 0),r([p(cc.Integer)],e.prototype,"count",void 0),r([l],e)}(cc.Component);o.default=u;var h=function(){function t(t,e,o){this.node=t,this.spd=e,this.gravity=o}return t.prototype.update=function(t){this.spd.y+=this.gravity*t,this.node.setPosition(this.node.x+this.spd.x*t,this.node.y+this.spd.y*t)},Object.defineProperty(t.prototype,"finished",{get:function(){return this.node.y<-667},enumerable:!1,configurable:!0}),t}();cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/GlobalPool":void 0}],FluidParticle:[function(t,e,o){"use strict";cc._RF.push(e,"b2f5a6l4wNBOIi+UCLoMRp4","FluidParticle");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../MainScene/Script/role/CollisComp"),c=t("../../Script/GameSpecial/GlobalEnum"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=c.GlobalEnum.CollisGroup.fluid,e.rigbody=null,e}return n(e,t),e.prototype.init=function(){},e.prototype.setVecLine=function(t){this.rigbody||(this.rigbody=this.node.getComponent(cc.RigidBody)),this.rigbody.linearVelocity=t},e.prototype.followTouch=function(t){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),o=t.sub(e);this.setVecLine(o.mul(10))},r([l],e)}(s.default));o.default=p,cc._RF.pop()},{"../../MainScene/Script/role/CollisComp":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],FluidRender:[function(t,e,o){"use strict";cc._RF.push(e,"7f5d8sVsLtOIJl5JNlnFGmZ","FluidRender");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FluidSprite=null,e.FluidCamera=null,e.FluidMate=null,e}return n(e,t),e.prototype.init=function(){this.node.getComponent(cc.Widget).updateAlignment(),this.initRenderCamera(),this.initRenderMaterial()},e.prototype.initRenderCamera=function(){var t=new cc.SpriteFrame,e=new cc.RenderTexture;e.initWithSize(this.node.width,this.node.height),t.setTexture(e),this.FluidSprite.spriteFrame=t,this.FluidCamera.targetTexture=e},e.prototype.initRenderMaterial=function(){this.FluidMate=this.FluidSprite.getMaterial(0)},e.prototype.setMateProperty=function(t,e){this.FluidMate.setProperty(t,e)},r([a(cc.Sprite)],e.prototype,"FluidSprite",void 0),r([a(cc.Camera)],e.prototype,"FluidCamera",void 0),r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Gas:[function(t,e,o){"use strict";cc._RF.push(e,"a98b5j4MN1Fxpg0kUBvGFw8","Gas");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Script/GameSpecial/GlobalEnum"),c=t("../FluidParticle"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisType=s.GlobalEnum.Collistype.gas,e}return n(e,t),e.prototype.init=function(){},r([l],e)}(c.default));o.default=p,cc._RF.pop()},{"../../../Script/GameSpecial/GlobalEnum":void 0,"../FluidParticle":"FluidParticle"}],Gem:[function(t,e,o){"use strict";cc._RF.push(e,"476e8HJq65JMrbNUZpLey2h","Gem");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../MainScene/Script/role/CollisComp"),c=t("../../Script/GameSpecial/GameEventType"),a=t("../../Script/GameSpecial/GlobalEnum"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=a.GlobalEnum.CollisGroup.role,e.collisType=a.GlobalEnum.Collistype.goal,e}return n(e,t),e.prototype.init=function(){},e.prototype.reuse=function(){},e.prototype.unuse=function(){},e.prototype.roleDie=function(){this.emit(c.EventType.DIYEvent.goalDie)},e.prototype.victory=function(){this.emit(c.EventType.DIYEvent.win)},e.prototype.onBeginContact=function(t,e,o){var i=o.node.getComponent(s.default);if(i)switch(i.collisType){case a.GlobalEnum.Collistype.magma:this.roleDie();break;case a.GlobalEnum.Collistype.player:this.victory()}},r([p],e)}(s.default));o.default=u,cc._RF.pop()},{"../../MainScene/Script/role/CollisComp":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],Guard:[function(t,e,o){"use strict";cc._RF.push(e,"a21b4r/vDNN/LKHZdV1tzBp","Guard");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,c=t("../../../MainScene/Script/role/CollisComp"),a=t("../../../MainScene/Script/role/Role"),l=t("../../../Script/GameSpecial/GameEventType"),p=t("../../../Script/GameSpecial/GlobalEnum"),u=cc._decorator,h=u.ccclass,f=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisType=p.GlobalEnum.Collistype.foe,e.loopAnim=[s.daiji,s.zou],e.isDie=!1,e.rigBody=null,e.isrescue=!1,e.vector=cc.v2(),e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.playAnima(s.daiji),this.isDie=!1},e.prototype.reuse=function(){this.initSkeleton(),this.playAnima(s.daiji),this.isDie=!1,this.node.active=!0},e.prototype.unuse=function(){this.reset()},e.prototype.setData=function(){},e.prototype.reset=function(){this.isrescue=!1,this.node.active=!0,this.rigBody&&(this.rigBody.linearVelocity=cc.v2())},e.prototype.startAction=function(){this.customStep=this.dtUp},e.prototype.roleDie=function(){var t=this;this.customStep=this.stepEmpty,this.playAnima(s.siwang),this.isDie=!0,setTimeout(function(){t.node.active=!1},1e3)},e.prototype.direcStone=function(t){var e=t.body.linearVelocity;e.lengthSqr()>=1e5&&e.y<-1e3&&this.roleDie()},e.prototype.onBeginContact=function(t,e,o){var i=o.node.getComponent(c.default);if(i)switch(i.collisType){case p.GlobalEnum.Collistype.smoke:case p.GlobalEnum.Collistype.magma:case p.GlobalEnum.Collistype.gas:this.isDie||this.roleDie();break;case p.GlobalEnum.Collistype.stone:this.isDie||this.direcStone(o);break;case p.GlobalEnum.Collistype.player:this.isDie||(this.emit(l.EventType.AudioEvent.playEffect,p.GlobalEnum.AudioClip.kan),this.customStep=this.stepEmpty,this.playAnima(s.kan))}},e.prototype.dtUp=function(){if(this.rigBody){var t=this.rigBody.linearVelocity;t.lengthSqr()>100?(this.playAnima(s.zou),t.x<0?this.node.scaleX=-1:this.node.scaleX=1):this.playAnima(s.daiji),this.isrescue&&this.rigBody.applyForceToCenter(this.vector.mul(2e3),!0)}else this.rigBody=this.node.getComponent(cc.RigidBody)},e.prototype.kill=function(t){this.isrescue=!0,this.vector=t.normalize()},r([h],e)}(a.default));o.default=f,function(t){t.daiji="daiji",t.zou="zou",t.siwang="siwang",t.kan="kan"}(s||(s={})),cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../MainScene/Script/role/Role":void 0,"../../../Script/GameSpecial/GameEventType":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0}],LevelCamera:[function(t,e,o){"use strict";cc._RF.push(e,"ade43+9RZtE46LoF1vdxOuA","LevelCamera");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/yyComponent"),c=t("../../Script/Common/Action3dManager"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.cameraNode=null,e.anchorNode=null,e}return n(e,t),e.prototype.initOriginalTransform=function(){this._originalPos=cc.v3(),this.cameraNode.getPosition(this._originalPos),this._originalEulerAngles=cc.v3(),this._originalEulerAngles.set(this.cameraNode.eulerAngles)},e.prototype.resumeOriginalTransform=function(t,e){if(void 0===t&&(t=0),!t)return this.cameraNode.setPosition(this._originalPos),void(this.cameraNode.eulerAngles=this._originalEulerAngles);this.changeCamera({duration:t,pos:this._originalPos,angle:this._originalEulerAngles,cb:e})},e.prototype.changeCamera=function(t){if(!t.duration)return t.pos&&this.cameraNode.setPosition(t.pos),t.angle&&(this.cameraNode.eulerAngles=t.angle),void(t.cb&&t.cb());var e=null,o=null;t.pos&&(e=c.default.moveTo(t.duration,t.pos)),t.angle&&(o=c.default.rotateTo(t.duration,t.angle));var i=null;e&&o?i=c.default.spawn(e,o):e?i=c.default.spawn(e):o&&(i=c.default.spawn(o));var n=c.default.getMng(c.ActionMngType.Level);if(i&&t.cb){var r=c.default.callFun(t.cb),s=c.default.sequence(i,r);n.runAction(this.cameraNode,s)}else i?n.runAction(this.cameraNode,i):t.cb&&t.cb()},e.prototype.init=function(){this.anchorNode=this.node,this.camera=this.node.getComponentInChildren(cc.Camera),this.cameraNode=this.camera.node,this.customStep=this.stepSlowFollow,this.adaptViewForWidth(),this.initOriginalTransform()},e.prototype.adaptViewForWidth=function(){var t=cc.v3();this.cameraNode.getPosition(t);var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),o=cc.find("Canvas").height,i=this.camera.fov,n=e*Math.tan(.0087265*i);n=n*o/1334;var r=114.6*Math.atan2(n,e);this.camera.fov=r},e.prototype.reset=function(){this.followTarget=null,this.resumeOriginalTransform()},e.prototype.setTarget=function(t){this.followTarget=t,this.anchorNode.setPosition(this.followTarget.x,0,this.followTarget.z)},e.prototype.stepSlowFollow=function(){this.followTarget&&this.anchorNode.setPosition(this.followTarget.x,0,this.followTarget.z)},e.prototype.moveTo=function(t,e,o){var i=c.default.getMng(c.ActionMngType.Level),n=c.default.moveTo(t,e);if(n.easing(c.default.easeOut(3)),o){var r=c.default.callFun(o);i.runAction(this.node,c.default.sequence(n,r))}else i.runAction(this.node,n)},e.prototype.convertWorldToScreen=function(t){var e=this.convertWorldToCanvas(t),o=cc.find("Canvas");return e.x,o.width,e.y+=.5*o.height,e},e.prototype.convertWorldToCanvas=function(t){var e=this.convertWorldToCamera(t),o=this.camera.fov,i=e.z,n=Math.tan(.0087265*o),r=Math.abs(i*n),s=e.x/r,c=e.y/r,a=cc.find("Canvas");return c=.5*a.height*c,s=.5*a.height*s,cc.v2(s,c)},e.prototype.convertWorldToCamera=function(t){var e=this.getCameraPos(),o=this.getCameraEulerAngles(),i=o.y,n=cc.v2(t.x-e.x,t.z-e.z);n=this.rotatePos(n,i),i=o.x;var r=cc.v2(n.y,t.y-e.y);return r=this.rotatePos(r,i),cc.v3(n.x,r.y,r.x)},e.prototype.getCameraPos=function(){var t=this.node.eulerAngles.y,e=this.rotatePos(cc.v2(this.cameraNode.x,this.cameraNode.z),-t);return cc.v3(e.x+this.node.x,this.cameraNode.y+this.node.y,e.y+this.node.z)},e.prototype.getCameraEulerAngles=function(){return cc.v3(this.cameraNode.eulerAngles.x,this.node.eulerAngles.y,0)},e.prototype.rotatePos=function(t,e){var o=.017453*e,i=Math.sin(o),n=Math.cos(o),r=t.x*n-t.y*i,s=t.x*i+t.y*n;return cc.v2(r,s)},e.prototype.convertToParent=function(t,e){var o=cc.v3(e.x*t.scaleX,e.y*t.scaleY,e.z*t.scaleZ),i=cc.v2(o.x,o.z);i=this.rotatePos(i,t.eulerAngles.y);var n=cc.v2(i.y,o.y);return n=this.rotatePos(n,t.eulerAngles.x),o.x=i.x+t.x,o.y=n.y+t.y,o.z=n.x+t.z,o},e.prototype.convertToNodePos=function(t,e,o){var i=cc.v3();for(i.set(o);e&&e.is3DNode&&e!=t;)i=this.convertToParent(e,i),e=e.parent;return i},r([p(cc.Camera)],e.prototype,"camera",void 0),r([p(cc.Node)],e.prototype,"cameraNode",void 0),r([p(cc.Node)],e.prototype,"anchorNode",void 0),r([l],e)}(s.default);o.default=u,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/yyComponent":void 0}],LevelManager:[function(t,e,o){"use strict";cc._RF.push(e,"8a3a1r8py9NEZq3f4jOfVcp","LevelManager");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/yyComponent"),c=t("../../Script/GameSpecial/GameEventType"),a=t("../../Script/Common/Action3dManager"),l=t("../../Script/GameSpecial/GlobalEnum"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pauseCount=0,e.levelLayer=null,e.actMng=null,e.nextState=null,e.needLoadCount=0,e}return n(e,t),e.prototype.init=function(){this.initComponents(),this.initCustomUpdateState(),this.initLevelTimer(),this.initActMng(),this.initEnterLobbyState(),this.loadLobbyItems(),this.registAllCustomUpdate(),this.onEvents(),cc.warn("\u5173\u5361\u7ba1\u7406\u5668\u7684init\u9700\u7531\u5b50\u7c7b\u5b9e\u73b0")},e.prototype.registAllCustomUpdate=function(){cc.warn("\u5173\u5361\u7ba1\u7406\u5668\u7684registAllCustomUpdate\u9700\u7531\u5b50\u7c7b\u5b9e\u73b0"),this.registCustomUpdate(l.GlobalEnum.LevelState.lobby,this.stepLobby),this.registCustomUpdate(l.GlobalEnum.LevelState.win,this.stepLevelWin),this.registCustomUpdate(l.GlobalEnum.LevelState.lose,this.stepLevelLose),this.registCustomUpdate(l.GlobalEnum.LevelState.playing,this.stepLevelPlaying)},e.prototype.onEvents=function(){cc.warn("\u5173\u5361\u7ba1\u7406\u5668\u7684onEvents\u9700\u7531\u5b50\u7c7b\u5b9e\u73b0"),this.on(c.EventType.DirectorEvent.pauseLevel,this.pause,this),this.on(c.EventType.DirectorEvent.resumeLevel,this.resume,this)},e.prototype.loadLobbyItems=function(){},e.prototype.reset=function(){this.resetCustomUpdateState(),this.resetLevelTimer()},Object.defineProperty(e.prototype,"paused",{get:function(){return this.isPaused},enumerable:!1,configurable:!0}),e.prototype.pause=function(t){void 0===t&&(t=1),this.pauseCount+=t,this.isPaused=!0},e.prototype.resume=function(t){void 0===t&&(t=1),-1===t?(this.pauseCount=0,this.isPaused=!1):(this.pauseCount-=t,this.pauseCount<=0&&(this.pauseCount=0,this.isPaused=!1))},e.prototype.initLevelTimer=function(){this.elapseTimer=0,this.isPaused=!1,this.pauseCount=0},e.prototype.resetLevelTimer=function(){this.elapseTimer=0,this.isPaused=!1,this.pauseCount=0},e.prototype.customUpdate=function(){if(!this.isPaused){var t=Date.now(),e=t-this.lastFrameTime;this.lastFrameTime=t,e>34&&(e=34),e*=.001,this.elapseTimer+=e,this.customStep&&this.customStep(e)}},e.prototype.running=function(t){this.isPaused||(this.updateAction(t),this.customStep&&this.customStep(t))},e.prototype.getLevelData=function(){return this.levelData},e.prototype.initActMng=function(){this.actMng=a.default.getMng(a.ActionMngType.Level)},e.prototype.updateAction=function(t){this.actMng.update(t)},e.prototype.enterLevel=function(t){this.node.active=!0,this.needLoadCount<=0?(this.reset(),this.levelData=t,this._enterLevel()):(this.levelData=t,this.nextState=l.GlobalEnum.LevelState.playing)},e.prototype._enterLevel=function(){this.setData(),this.startLevel()},e.prototype.startLevel=function(){this.enterCustomUpdateState(l.GlobalEnum.LevelState.playing),this.lastFrameTime=Date.now(),this.emit(c.EventType.CtrlEvent.ctrlStart),this.emit(c.EventType.AudioEvent.playBGM,l.GlobalEnum.AudioClip.BGM,!0);var t=this.levelData.lv;void 0===t&&(t=this.levelData.id),this.emit(c.EventType.ALDEvent.levelStart,t),this.emit(c.EventType.UIEvent.showTip,"\u5173\u5361\u5f00\u59cb\uff01")},e.prototype.setTeachCmp=function(){},e.prototype.exit=function(){this.reset()},e.prototype.initEnterLobbyState=function(){this.nextState=null,this.needLoadCount=0,console.warn("\u8fdb\u5165\u9996\u9875\u5fc5\u987b\u52a0\u8f7d\u7684\u9884\u5236\u4ef6\u6570\u91cf\u4e3a\uff1a",this.needLoadCount)},e.prototype.enterLobby=function(){this.needLoadCount<=0?(this.reset(),this.setEnterLobbyData(),this.enterCustomUpdateState(l.GlobalEnum.LevelState.lobby)):this.nextState=l.GlobalEnum.LevelState.lobby},e.prototype.setEnterLobbyData=function(){console.log("\u8bbe\u7f6e\u5173\u5361\u573a\u666f\u4f5c\u4e3a\u9996\u9875\u80cc\u666f\u65f6\u7684\u6570\u636e\uff0c\u7531\u5b50\u7c7b\u5b9e\u73b0")},e.prototype.loadLobbyItemFinish=function(){if(this.needLoadCount--,this.needLoadCount<=0){switch(this.nextState){case l.GlobalEnum.LevelState.lobby:this.setEnterLobbyData(),this.enterCustomUpdateState(l.GlobalEnum.LevelState.lobby);break;case l.GlobalEnum.LevelState.playing:this._enterLevel()}this.emit(c.EventType.LevelEvent.levelSceneLoadFinish)}},e.prototype.stepLevelPlaying=function(){},e.prototype.stepLevelWin=function(){},e.prototype.stepLevelLose=function(){},e.prototype.stepLobby=function(){},e.prototype.win=function(t){this.enterCustomUpdateState(l.GlobalEnum.LevelState.win),this.emit(c.EventType.CtrlEvent.ctrlEnd),this.emit(c.EventType.DirectorEvent.playerWin,t),this.emit(c.EventType.AudioEvent.stopBGM),this.emit(c.EventType.ALDEvent.levelWin,this.levelData),this.emit(c.EventType.PlayerDataEvent.trySkinEnd,l.GlobalEnum.GoodsType.playerSkin)},e.prototype.lose=function(t){this.enterCustomUpdateState(l.GlobalEnum.LevelState.lose),this.emit(c.EventType.CtrlEvent.ctrlEnd),this.emit(c.EventType.DirectorEvent.playerLose,t),this.emit(c.EventType.AudioEvent.stopBGM);var e=this.levelData.lv;void 0===e&&(e=this.levelData.id),this.emit(c.EventType.ALDEvent.levelLose,e),this.emit(c.EventType.PlayerDataEvent.trySkinEnd,l.GlobalEnum.GoodsType.playerSkin)},r([h(cc.Node)],e.prototype,"levelLayer",void 0),r([u],e)}(s.default);o.default=f,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],LevelUI:[function(t,e,o){"use strict";cc._RF.push(e,"c50c2yWYFdKD5GK1xRm5qNH","LevelUI");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Script/Common/yyComponent"),c=t("./FinishAnim"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelData=null,e.lv=0,e.lvLab=null,e.finish=null,e.dipian=[],e.chushi=[],e.wancheng=[],e.zhongjian=null,e}return n(e,t),e.prototype.init=function(){this.onEvents(),this.initTip()},e.prototype.reset=function(){this.offEvents()},e.prototype.setData=function(t){this.onEvents(),this.levelData=t,this.lv=this.levelData.lv,this.setLv(),this.startGame()},e.prototype.startGame=function(){1==this.lv?this.showTip1():(this.zhongjian.active=!0,this.lv%2==0?this.showOne():this.showTow())},e.prototype.setLv=function(){this.lvLab.string=this.lv.toString()},e.prototype.animPlay=function(){this.finish.play()},e.prototype.initTip=function(){for(var t=0;t<3;t++)this.dipian[t].active=!1,this.chushi[t].active=!0,this.wancheng[t].active=!1},e.prototype.showOne=function(){this.dipian[0].active=!0,this.chushi[0].active=!1,this.wancheng[0].active=!0},e.prototype.showTow=function(){this.dipian[0].active=!0,this.chushi[0].active=!1,this.wancheng[0].active=!0,this.dipian[1].active=!0,this.chushi[1].active=!1,this.wancheng[1].active=!0},e.prototype.showTip1=function(){this.zhongjian.active=!1,this.showOne()},r([p(cc.Label)],e.prototype,"lvLab",void 0),r([p(c.default)],e.prototype,"finish",void 0),r([p([cc.Node])],e.prototype,"dipian",void 0),r([p([cc.Node])],e.prototype,"chushi",void 0),r([p([cc.Node])],e.prototype,"wancheng",void 0),r([p(cc.Node)],e.prototype,"zhongjian",void 0),r([l],e)}(s.default);o.default=u,cc._RF.pop()},{"../../Script/Common/yyComponent":void 0,"./FinishAnim":"FinishAnim"}],List:[function(t,e,o){"use strict";cc._RF.push(e,"9fdcavkicJFLrLb9wRrsSJq","List"),Object.defineProperty(o,"__esModule",{value:!0}),o.ListNode=void 0;var i=function(){function t(){this._firstNode=null,this._lastNode=null,this.count=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this.count},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.reset()},t.prototype.reset=function(){for(var t=this.first;t;)t.prev=null,t=t.next;for(t=this.last;t;)t.next=null,t=t.prev;this._firstNode=null,this._lastNode=null,this.count=0},t.prototype.addFirstNode=function(t){if(this.count>0)console.error("list.addFirstNode error: list._firstNode is not null.");else{var e=new n(t);this._firstNode=e,this._lastNode=e,this.count=1}},Object.defineProperty(t.prototype,"first",{get:function(){return this._firstNode},enumerable:!1,configurable:!0}),t.prototype.push=function(t){if(this.count<=0)this.addFirstNode(t);else{var e=new n(t);e.prev=this._lastNode,this._lastNode.next=e,this._lastNode=e,this.count++}},Object.defineProperty(t.prototype,"last",{get:function(){return this._lastNode},enumerable:!1,configurable:!0}),t.prototype.pop=function(){if(0==this.count)return null;if(1==this.count){var t=this._firstNode;return this.clear(),t}return t=this._lastNode,this._lastNode=this._lastNode.prev,this._lastNode.next=null,this.count--,t.prev=null,t},t.prototype.shift=function(){if(this.count<=0)return null;var t=this._firstNode;return 1==this.count?(this.clear(),t):(this._firstNode=this._firstNode.next,this._firstNode.prev=null,this.count--,t.next=null,t)},t.prototype.unshift=function(t){if(this.count<=0)this.addFirstNode(t);else{var e=new n(t);e.next=this._firstNode,this._firstNode.prev=e,this._firstNode=e,this.count++}},t.prototype.at=function(t){if(t<0||t>=this.count)return null;for(var e=this._firstNode;--t>=0;)e=e.next;return e},t.prototype.get=function(t){var e=this.at(t);return e?e.value:null},t.prototype.insert=function(t,e){if(t>=this.count)this.push(e);else if(t<=0)this.unshift(e);else{var o=this.at(t),i=new n(e);i.prev=o,i.next=o.next,o.next.prev=i,o.next=i}},t.prototype.remove=function(t){return"number"==typeof t?this.removeByIndex(t):t instanceof n&&this.indexOf(t)>=0?(this.removeNode(t),t):void 0},t.prototype.removeNode=function(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),null===t.prev&&(this._firstNode=t.next),null===t.next&&(this._lastNode=t.prev),t.prev=null,t.next=null,this.count--},t.prototype.indexOf=function(t){if(t instanceof n){for(var e=0,o=this._firstNode;o&&o!==t;)o=o.next,e++;return o===t?e:-1}for(e=0,o=this._firstNode;o&&o.value!==t;)o=o.next,e++;return o.value===t?e:-1},t.prototype.removeByIndex=function(t){if(t<0||t>=this.count)return null;for(var e=this._firstNode;--t>=0;)e=e.next;return this.removeNode(e),e},t.prototype.splice=function(t,e){if(void 0===e&&(e=1),!(t<0||t>=this.count))if(1!=e){for(var o=this._firstNode;--t>=0;)o=o.next;for(var i=o.next;--e>0&&i;)i=i.next;for(o.prev?o.prev.next=i:this._firstNode=i,i&&(i.prev&&(i.prev.next=null),i.prev=o.prev);o;){o.prev=null;var n=o.next;o.next=null,o=n}this.count-=e}else this.removeByIndex(t)},t}();o.default=i;var n=function(){function t(t){this.value=null,this.prev=null,this.next=null,this.value=t}return t.prototype.destroy=function(){this.value=null,this.prev=null,this.next=null},t}();o.ListNode=n,cc._RF.pop()},{}],Magma:[function(t,e,o){"use strict";cc._RF.push(e,"ec300vlaJBNRYjmZpTIP2yt","Magma");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/GameSpecial/GameEventType"),a=t("../../../Script/GameSpecial/GlobalEnum"),l=t("../FluidParticle"),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisType=a.GlobalEnum.Collistype.magma,e.isCHange=!1,e}return n(e,t),e.prototype.init=function(){this.isCHange=!1},e.prototype.reuse=function(){this.isCHange=!1},e.prototype.unuse=function(){},e.prototype.onBeginContact=function(t,e,o){var i=o.node.getComponent(s.default);i&&(i.collisType!=a.GlobalEnum.Collistype.water&&i.collisType!=a.GlobalEnum.Collistype.stone||this.solidify())},e.prototype.solidify=function(){this.isCHange||(this.isCHange=!0,this.emit(c.EventType.SceneChangeEvent.solidify,this))},r([u],e)}(l.default));o.default=h,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/GameSpecial/GameEventType":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0,"../FluidParticle":"FluidParticle"}],MainLevelScrText:[function(t,e,o){"use strict";cc._RF.push(e,"674cfmuZRBGfYGB4cN6nhLn","MainLevelScrText");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../MainScene/Script/role/CollisComp"),c=t("../../Script/Common/GlobalPool"),a=t("../../Script/Common/yyComponent"),l=t("../../Script/GameSpecial/GameEventType"),p=t("../../Script/GameSpecial/GlobalEnum"),u=t("../Fluid/FluidRender"),h=cc._decorator,f=h.ccclass,d=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FluidRender=null,e.levelData=null,e.backGroundScr=null,e.buildingScrs=[],e.roleScrs=[],e.playerScr=null,e.goalScr=null,e.foeScrs=[],e}return n(e,t),e.prototype.init=function(){this.FluidRender.init(),this.initScene(),this.enter(1)},e.prototype.reset=function(){this.offEvents(),this.customStep=this.stepEmpty},e.prototype.onEvents=function(){this.on(l.EventType.SceneChangeEvent.evaporation,this.evaporation,this),this.on(l.EventType.SceneChangeEvent.solidify,this.solidify,this),this.node.on("touchstart",this.touchStart,this)},e.prototype.evaporation=function(t){c.default.put(t.node)},e.prototype.solidify=function(t){var e=t.node.parent,o=t.node.getPosition();c.default.put(t.node);var i=c.default.get("Stone");e.addChild(i),i.setPosition(o)},e.prototype.enter=function(t){this.customStep=this.dtUp,this.onEvents(),console.log(t),this.levelData=t,this.enterScene()},e.prototype.enterScene=function(){for(var t=0;t<this.roleScrs.length;t++)this.roleScrs[t].startAction()},e.prototype.dtUp=function(){for(var t=0;t<this.roleScrs.length;t++)this.roleScrs[t].customUpdate();this.examine()},e.prototype.touchStart=function(){console.log("asd"),this.examine()},e.prototype.initScene=function(){this.initBg(),this.initRole(),this.initBuildings()},e.prototype.initBg=function(){var t=this.node.getChildByName("backGround").getComponent(s.default);t.init(),this.backGroundScr=t,t.setData({size:[this.node.width,this.node.height],spriteFrame:null,data:{}})},e.prototype.initRole=function(){for(var t=this.node.getChildByName("role").children,e=0;e<t.length;e++){var o=t[e].getComponent(s.default);o.init(),this.roleScrs.push(o),o.collisType==p.GlobalEnum.Collistype.goal?this.goalScr=o:o.collisType==p.GlobalEnum.Collistype.player?this.playerScr=o:o.collisType==p.GlobalEnum.Collistype.foe&&this.foeScrs.push(o)}},e.prototype.initBuildings=function(){for(var t=this.node.getChildByName("buildings").children,e=0;e<t.length;e++){var o=t[e].getComponent(s.default);o.init(),this.buildingScrs.push(o),o.setData({})}},e.prototype.getMapData=function(){var t={};return t.backGround=this.getBgData(),t.role=this.getRoleData(),t.buildings=this.getBuildData(),t},e.prototype.getBgData=function(){return this.backGroundScr.getMapData()},e.prototype.getRoleData=function(){for(var t=[],e=0;e<this.roleScrs.length;e++)t.push(this.roleScrs[e].getMapData());return t},e.prototype.getBuildData=function(){for(var t=[],e=0;e<this.buildingScrs.length;e++)t.push(this.buildingScrs[e].getMapData());return t},e.prototype.radial=function(t,e,o){void 0===o&&(o=cc.RayCastType.Closest);var i=cc.director.getPhysicsManager().rayCast(t,e,o);return i.length>0?i[0]:null},e.prototype.examine=function(){this.goalScr&&this.examineP_G(),this.foeScrs.length>0&&this.examineF_P()},e.prototype.examineP_G=function(){var t=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250)),e=this.goalScr.node.convertToWorldSpaceAR(cc.v2(0,250)),o=e.y-t.y;if(!(o>100)){var i=this.radial(t,cc.v2(e.x>t.x?1e4:-1e4,t.y));i&&(i.collider.node.getComponent(s.default).collisType==p.GlobalEnum.Collistype.goal?this.playerScr.rescue(e.sub(t)):o<0&&this.fallExamineTow())}},e.prototype.examineF_P=function(){for(var t=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250)),e=0;e<this.foeScrs.length;e++){var o=this.foeScrs[e].node.convertToWorldSpaceAR(cc.v2(0,250)),i=this.radial(o,cc.v2(t.x>o.x?1e4:-1e4,o.y));i&&i.collider.node.getComponent(s.default).collisType==p.GlobalEnum.Collistype.player&&this.foeScrs[e].kill(t.sub(o))}},e.prototype.fallExamine=function(t,e){var o=cc.v2(),i=cc.v2();t.point.x>e.point.x?(i.x=t.point.x,o.x=e.point.x):(i.x=e.point.x,o.x=t.point.x),t.point.y>e.point.y?(i.y=t.point.y,o.y=e.point.y):(i.y=e.point.y,o.y=t.point.y),console.log(o),console.log(i);for(var n=Math.floor((i.x-o.x)/10),r=0;r<n;r++){var s=cc.v2(o.x+10,i.y),c=this.radial(s,cc.v2(s.x,-1e4));if(!c)return;if(c.point.y<o.y){var a=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250));return this.playerScr.rescue(s.sub(a)),void console.log("\u4e0b\u843d\u6551\u63f4")}}},e.prototype.fallExamineTow=function(){for(var t=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250)),e=this.goalScr.node.convertToWorldSpaceAR(cc.v2(0,250)),o=this.getLimitRect(t,e),i=Math.floor((o.maxPos.x-o.minPos.x)/10),n=0;n<i;n++){var r=cc.v2(o.minPos.x+10*n,o.maxPos.y),s=this.radial(r,cc.v2(r.x,-1e4));if(!s)return;if(s.point.y<o.minPos.y){var c=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250));return this.playerScr.rescue(r.sub(c)),void console.log("\u4e0b\u843d\u6551\u63f4")}}},e.prototype.getLimitRect=function(t,e){var o=this.radial(t,cc.v2(-1e4,t.x)).point,i=this.radial(t,cc.v2(1e4,t.x)).point,n=this.radial(e,cc.v2(-1e4,e.x)).point,r=this.radial(e,cc.v2(1e4,e.x)).point,s={minPos:cc.v2(),maxPos:cc.v2()};return o.x<n.x?s.minPos.x=n.x:s.minPos.x=o.x,i.x<r.x?s.maxPos.x=i.x:s.maxPos.x=r.x,o.y<n.y?(s.minPos.y=o.y,s.maxPos.y=n.y):(s.minPos.y=n.y,s.maxPos.y=o.y),s},r([d(u.default)],e.prototype,"FluidRender",void 0),r([f],e)}(a.default);o.default=y,cc._RF.pop()},{"../../MainScene/Script/role/CollisComp":void 0,"../../Script/Common/GlobalPool":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0,"../Fluid/FluidRender":"FluidRender"}],MainLevelScr:[function(t,e,o){"use strict";cc._RF.push(e,"ea9f3/j4QxPAJUk2KtYpdg9","MainLevelScr");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../MainScene/Script/role/CollisComp"),c=t("../../Script/Common/GlobalPool"),a=t("../../Script/Common/PlayerData"),l=t("../../Script/Common/yyComponent"),p=t("../../Script/GameSpecial/GameEventType"),u=t("../../Script/GameSpecial/GlobalEnum"),h=t("../Fluid/FluidRender"),f=t("./LevelUI"),d=cc._decorator,y=d.ccclass,v=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FluidRender=null,e.levelData=null,e.backGroundScr=null,e.buildingScrs=[],e.playerScr=null,e.goalScr=null,e.foeScrs=[],e.levelUI=null,e.gameOver=!1,e}return n(e,t),e.prototype.init=function(){this.FluidRender.init(),this.levelUI.init()},e.prototype.reset=function(){this.offEvents(),this.customStep=this.stepEmpty,this.playerScr&&this.resetScene()},e.prototype.enter=function(t){this.onEvents(),this.customStep=this.dtUp,this.gameOver=!1,console.log(t),this.levelData=t,this.levelUI.setData(t),this.initScene(),this.enterScene()},e.prototype.onEvents=function(){this.on(p.EventType.SceneChangeEvent.evaporation,this.evaporation,this),this.on(p.EventType.SceneChangeEvent.solidify,this.solidify,this),this.on(p.EventType.DIYEvent.loss,this.loss,this),this.on(p.EventType.DIYEvent.win,this.win,this)},e.prototype.evaporation=function(t){c.default.put(t.node)},e.prototype.solidify=function(t){var e=t.node.parent,o=t.node.getPosition();c.default.put(t.node);var i=c.default.get("Stone");e.addChild(i),i.setPosition(o);var n=c.default.get("Stone");e.addChild(n),n.setPosition(o)},e.prototype.initScene=function(){if(this.initBg(this.levelData.mapData.backGround),this.initRole(this.levelData.mapData.role),this.initBuildings(this.levelData.mapData.buildings),1==this.levelData.lv){var t=this.node.getChildByName("buildings").getChildByName("Needle1").convertToWorldSpaceAR(cc.v2());this.emit(p.EventType.UIEvent.showClickTip,{worldPos:t})}else 2==this.levelData.lv?(t=this.node.getChildByName("buildings").getChildByName("Faucet").convertToWorldSpaceAR(cc.v2()),this.emit(p.EventType.UIEvent.showClickTip,{worldPos:t,tip:"\u6c34\u53ef\u4ee5\u4f7f\u5ca9\u6d46\u51dd\u56fa\n\u8bd5\u8bd5\u770b\uff01"})):5==this.levelData.lv&&(t=this.node.getChildByName("buildings").getChildByName("Needle2").convertToWorldSpaceAR(cc.v2()),this.emit(p.EventType.UIEvent.showClickTip,{worldPos:t}))},e.prototype.resetScene=function(){this.backGroundScr.reset(),c.default.put(this.playerScr.node),this.playerScr=null,c.default.put(this.goalScr.node),this.goalScr=null;for(var t=0;t<this.foeScrs.length;t++)c.default.put(this.foeScrs[t].node);for(t=0;t<this.buildingScrs.length;t++)this.buildingScrs[t].node.destroy();this.foeScrs=[],this.buildingScrs=[]},e.prototype.initBg=function(t){var e=this.node.getChildByName("backGround").getComponent(s.default);e.init(),this.backGroundScr=e,e.setData({size:[this.node.width,this.node.height],spriteFrame:t.data.spriteFrame,data:t.data.data})},e.prototype.initRole=function(t){for(var e=this.node.getChildByName("role"),o=0;o<t.length;o++){var i=t[o],n=c.default.get(i.name);e.addChild(n),n.setPosition(i.pos[0],i.pos[1]);var r=n.getComponent(s.default);if(r.collisType==u.GlobalEnum.Collistype.player){this.playerScr=r;var l=a.default.getCurSkinId();r.setData({skinID:l,data:i.data})}else r.collisType==u.GlobalEnum.Collistype.goal?this.goalScr=r:r.collisType==u.GlobalEnum.Collistype.foe&&this.foeScrs.push(r)}},e.prototype.initBuildings=function(t){for(var e=this.node.getChildByName("buildings"),o=0;o<t.length;o++){var i=t[o],n=c.default.get(i.name);e.addChild(n),n.setPosition(i.pos[0],i.pos[1]);var r=n.getComponent(s.default);this.buildingScrs.push(r),r.setData(i.data)}},e.prototype.enterScene=function(){for(var t=0;t<this.foeScrs.length;t++)this.foeScrs[t].startAction();this.playerScr&&this.playerScr.startAction(),this.goalScr&&this.goalScr.startAction()},e.prototype.dtUp=function(t){for(var e=0;e<this.foeScrs.length;e++)this.foeScrs[e].customUpdate(t);this.playerScr&&this.playerScr.customUpdate(t),this.goalScr&&this.goalScr.customUpdate(t),this.gameOver||this.examine()},e.prototype.radial=function(t,e,o){void 0===o&&(o=cc.RayCastType.Closest);var i=cc.director.getPhysicsManager().rayCast(t,e,o);return i.length>0?i[0]:null},e.prototype.examine=function(){this.goalScr&&this.examineP_G(),this.foeScrs.length>0&&this.examineF_P()},e.prototype.examineP_G=function(){var t=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250)),e=this.goalScr.node.convertToWorldSpaceAR(cc.v2(0,250)),o=e.y-t.y;if(!(o>100)){var i=this.radial(t,cc.v2(e.x>t.x?1e4:-1e4,t.y));i&&(i.collider.node.getComponent(s.default).collisType==u.GlobalEnum.Collistype.goal?this.playerScr.rescue(e.sub(t)):o<0&&this.fallExamineTow())}},e.prototype.examineF_P=function(){for(var t=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250)),e=0;e<this.foeScrs.length;e++){var o=this.foeScrs[e].node.convertToWorldSpaceAR(cc.v2(0,250)),i=this.radial(o,cc.v2(t.x>o.x?1e4:-1e4,o.y));i&&i.collider.node.getComponent(s.default).collisType==u.GlobalEnum.Collistype.player&&this.foeScrs[e].kill(t.sub(o))}},e.prototype.fallExamineTow=function(){for(var t=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250)),e=this.goalScr.node.convertToWorldSpaceAR(cc.v2(0,250)),o=this.getLimitRect(t,e),i=Math.floor((o.maxPos.x-o.minPos.x)/10),n=0;n<i;n++){var r=cc.v2(o.minPos.x+10*n,o.maxPos.y),s=this.radial(r,cc.v2(r.x,-1e4));if(!s)return;if(s.point.y<o.minPos.y){var c=this.playerScr.node.convertToWorldSpaceAR(cc.v2(0,250));return this.playerScr.rescue(r.sub(c)),void console.log("\u4e0b\u843d\u6551\u63f4")}}},e.prototype.getLimitRect=function(t,e){var o,i,n,r,s=this.radial(t,cc.v2(-1e4,t.y));o=s?s.point:cc.v2(-1e3,t.y);var c=this.radial(t,cc.v2(1e4,t.y));i=c?c.point:cc.v2(1e3,t.y);var a=this.radial(e,cc.v2(-1e4,e.y));n=a?a.point:cc.v2(-1e3,e.y);var l=this.radial(e,cc.v2(1e4,e.y));r=l?l.point:cc.v2(1e3,e.y);var p={minPos:cc.v2(),maxPos:cc.v2()};return o.x<n.x?p.minPos.x=n.x:p.minPos.x=o.x,i.x<r.x?p.maxPos.x=i.x:p.maxPos.x=r.x,o.y<n.y?(p.minPos.y=o.y,p.maxPos.y=n.y):(p.minPos.y=n.y,p.maxPos.y=o.y),p},e.prototype.onBtnReset=function(){var t=this;this.reset(),setTimeout(function(){t.enter(t.levelData)},40)},e.prototype.onBtnJump=function(){this.onBtnVideo()},e.prototype.onBtnVideo=function(){var t=this;this.emit(p.EventType.AudioEvent.playClickBtn),this.emit(p.EventType.SDKEvent.showVideo,{success:function(){t.addLv(),t.reset(),setTimeout(function(){t.enterLevel()},40)}})},e.prototype.addLv=function(){var t=a.default.getData("gameData.curLevel");1!=t%2||a.default.getData("gameData.curBoss")!=(t+1)/2?this.addCurLevel():this.addCurBoss()},e.prototype.enterLevel=function(){this.emit(p.EventType.SDKEvent.hideBanner),this.emit(p.EventType.AudioEvent.playClickBtn),this.emit(p.EventType.GameFlow.enterGameFlow,u.GlobalEnum.GameFlowStep.level)},e.prototype.addCurLevel=function(){this.emit(p.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.curLevel",value:1,mode:"+"})},e.prototype.addCurBoss=function(){this.emit(p.EventType.PlayerDataEvent.updatePlayerData,{type:"gameData",attribute:"gameData.curBoss",value:1,mode:"+"})},e.prototype.loss=function(){var t=this;this.gameOver||(this.gameOver=!0,setTimeout(function(){t.reset(),t.emit(p.EventType.LevelEvent.testLose)},2e3))},e.prototype.win=function(){var t=this;this.gameOver||(this.gameOver=!0,this.levelUI.animPlay(),setTimeout(function(){t.emit(p.EventType.AudioEvent.playEffect,u.GlobalEnum.AudioClip.win)},1e3),setTimeout(function(){t.reset(),t.emit(p.EventType.LevelEvent.testWin)},3e3))},r([v(h.default)],e.prototype,"FluidRender",void 0),r([v(f.default)],e.prototype,"levelUI",void 0),r([y],e)}(l.default);o.default=m,cc._RF.pop()},{"../../MainScene/Script/role/CollisComp":void 0,"../../Script/Common/GlobalPool":void 0,"../../Script/Common/PlayerData":void 0,"../../Script/Common/yyComponent":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0,"../Fluid/FluidRender":"FluidRender","./LevelUI":"LevelUI"}],MyLevelManager:[function(t,e,o){"use strict";cc._RF.push(e,"96965tMQ3pGBpQf/2vNsU/8","MyLevelManager");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./LevelManager"),c=t("../../Script/GameSpecial/GlobalEnum"),a=t("../../Script/GameSpecial/GameEventType"),l=t("./LevelCamera"),p=t("./MainLevelScr"),u=t("../../Script/Common/Loader"),h=t("../../Script/Common/Action3dManager"),f=t("./BossLevelScr"),d=cc._decorator,y=d.ccclass,v=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LevelType="",e.camera=null,e.mainLevelScr=null,e.bosslevel=null,e}return n(e,t),e.prototype.init=function(){this.initCamera(),this.initCustomUpdateState(),this.initLevelTimer(),this.initActMng(),this.initEnterLobbyState(),this.loadLobbyItems(),this.registAllCustomUpdate(),this.onEvents(),this.loadScene()},e.prototype.registAllCustomUpdate=function(){this.registCustomUpdate(c.GlobalEnum.LevelState.playing,this.stepLevelPlaying),this.registCustomUpdate(c.GlobalEnum.LevelState.win,this.stepLevelWin),this.registCustomUpdate(c.GlobalEnum.LevelState.lose,this.stepLevelLose),this.registCustomUpdate(c.GlobalEnum.LevelState.lobby,this.stepLobby)},e.prototype.onEvents=function(){this.on(a.EventType.DirectorEvent.pauseLevel,this.pause,this),this.on(a.EventType.DirectorEvent.resumeLevel,this.resume,this),this.on(a.EventType.LevelEvent.testLose,this.onTestLose,this),this.on(a.EventType.LevelEvent.testWin,this.onTestWin,this)},e.prototype.offEvents=function(){},e.prototype.loadScene=function(){var t=this;u.default.loadBundle("LevelScene",function(){u.default.loadBundleRes("LevelScene","Prefab/LevelScene",function(e){if(!t.mainLevelScr){var o=cc.instantiate(e);t.levelLayer.getChildByName("LevelScene").addChild(o),t.mainLevelScr=o.getComponent(p.default),t.mainLevelScr.init()}t.enterMainScene()},cc.Prefab,!0)},!0,!0)},e.prototype.loadLobbyItems=function(){},e.prototype.reset=function(){this.resetCamera(),this.resetCustomUpdateState(),this.resetLevelTimer(),this.mainLevelScr&&this.mainLevelScr.reset(),this.bosslevel&&(this.bosslevel.node.destroy(),this.bosslevel=null)},e.prototype.enterLevel=function(t){if(this.emit(a.EventType.AudioEvent.playBGM,c.GlobalEnum.AudioClip.BGM,!0),this.node.active=!0,this.needLoadCount<=0){if(this.reset(),t&&0==t.lv){this.levelData=t;var e=t.bossID;return this._enterBoss(e),void(this.LevelType="boss")}this.levelData=t,this.LevelType="level",this.mainLevelScr&&this._enterLevel()}else this.levelData=t,this.nextState=c.GlobalEnum.LevelState.playing},e.prototype._enterLevel=function(){this.setData(),this.startLevel(),this.mainLevelScr.enter(this.levelData)},e.prototype._enterBoss=function(t){var e=this,o="BossScene"+t;u.default.loadBundle("LevelScene",function(){u.default.loadBundleRes("LevelScene","Prefab/"+o,function(t){if(!e.bosslevel){var o=cc.instantiate(t);e.levelLayer.getChildByName("BossScene").addChild(o),e.bosslevel=o.getComponent(f.default),e.bosslevel.init(),e.bosslevel.setData({lv:e.levelData.BossID,mapData:{}})}},cc.Prefab,!0)},!0,!0)},e.prototype.enterMainScene=function(){"level"==this.LevelType&&this.levelData&&this._enterLevel()},e.prototype.setData=function(){},e.prototype.setTeachCmp=function(){},e.prototype.setEnterLobbyData=function(){},e.prototype.initPlayer=function(){},e.prototype.resetPlayer=function(){},e.prototype.setPlayer=function(){},e.prototype.updatePlayer=function(){},e.prototype.initCamera=function(){this.camera.init()},e.prototype.resetCamera=function(){this.camera.reset()},e.prototype.updateCamera=function(t){this.camera.customUpdate(t)},e.prototype.stepLevelPlaying=function(t){this.updateCamera(t),this.updatePlayer(t),"level"==this.LevelType?this.mainLevelScr&&this.mainLevelScr.customUpdate(t):"boss"==this.LevelType&&this.bosslevel&&this.bosslevel.customUpdate(t),h.default.getMng(h.ActionMngType.Level).update(t)},e.prototype.stepLevelWin=function(){},e.prototype.getWinData=function(){var t={};return t.lv=this.levelData.lv,t},e.prototype.stepLevelLose=function(){},e.prototype.stepLobby=function(){},e.prototype.onTestWin=function(){this.win()},e.prototype.onTestLose=function(){this.lose()},r([v(l.default)],e.prototype,"camera",void 0),r([y],e)}(s.default);o.default=m,cc._RF.pop()},{"../../Script/Common/Action3dManager":void 0,"../../Script/Common/Loader":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0,"./BossLevelScr":"BossLevelScr","./LevelCamera":"LevelCamera","./LevelManager":"LevelManager","./MainLevelScr":"MainLevelScr"}],Needle1:[function(t,e,o){"use strict";cc._RF.push(e,"608aawsN4NDoYz/+EX+imxZ","Needle1");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/GameSpecial/GlobalEnum"),a=t("./Trident1"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=c.GlobalEnum.CollisGroup.ground,e.collisType=c.GlobalEnum.Collistype.needle,e.holder=null,e.trident=null,e.box=null,e}return n(e,t),e.prototype.init=function(){this.onEvents(),this.trident.init()},e.prototype.reuse=function(){this.onEvents()},e.prototype.unuse=function(){this.offEvents(),this.reset()},e.prototype.onEvents=function(){this.node.on("touchstart",this.touchStart,this)},e.prototype.offEvents=function(){this.node.on("touchstart",this.touchStart,this)},e.prototype.touchStart=function(){this.level()},e.prototype.reset=function(){this.trident.reset()},e.prototype.level=function(){console.log("needle1level"),this.trident.move(this.box)},e.prototype.setData=function(t){t.height&&(this.node.width=100,this.node.height=t.height,this.box.height=t.height),t.angle&&(this.node.angle=t.angle),this.updateWidget(),t.data?(t.data.HolderPos&&this.holder.setPosition(t.data.HolderPos[0],t.data.HolderPos[1]),t.data.tridentData&&this.trident.setData(t.data.tridentData)):this.trident.setData({})},e.prototype._getMapData=function(){var t={};return t.height=this.node.height,t.angle=this.node.angle,t.data=this.getData(),t},e.prototype.getData=function(){var t={};return t.HolderPos=[this.holder.x,this.holder.y],t.tridentData=this.trident.getMapData(),t},r([u(cc.Node)],e.prototype,"holder",void 0),r([u(a.default)],e.prototype,"trident",void 0),r([u(cc.Node)],e.prototype,"box",void 0),r([p],e)}(s.default);o.default=h,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0,"./Trident1":"Trident1"}],Needle2:[function(t,e,o){"use strict";cc._RF.push(e,"e0a98gVGltJrb5gsFX771NF","Needle2");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/GameSpecial/GlobalEnum"),a=t("./Trident2"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=c.GlobalEnum.CollisGroup.ground,e.collisType=c.GlobalEnum.Collistype.needle,e.trident=null,e.pos1=null,e.pos2=null,e}return n(e,t),e.prototype.init=function(){this.onEvents(),this.initPos(),this.trident.init()},e.prototype.reuse=function(){this.onEvents(),this.initPos()},e.prototype.unuse=function(){this.offEvents(),this.reset()},e.prototype.reset=function(){this.trident.reset()},e.prototype.setData=function(t){t.size&&(this.node.width=t.size[0],this.node.height=t.size[1]),t.angle&&(this.node.angle=t.angle),this.initPos(),t.data?(t.data.pos&&this.trident.node.setPosition(cc.v2(t.data.pos[0],t.data.pos[1])),t.data.tridentData&&this.trident.setData(t.data.tridentData)):this.trident.setData({})},e.prototype.onEvents=function(){this.node.on("touchstart",this.touchStart,this)},e.prototype.touchStart=function(){this.move()},e.prototype.move=function(){if(!this.trident.ismoving){var t;t=this.trident.node.x>0?this.pos1:this.pos2,this.trident.move(t)}},e.prototype.initPos=function(){this.pos1=cc.v2(-this.node.width/2+31,0),this.pos2=cc.v2(this.node.width/2-31,0)},e.prototype._getMapData=function(){var t={};return t.size=[this.node.width,this.node.height],t.angle=this.node.angle,t.data=this.getData(),t},e.prototype.getData=function(){var t={};return t.pos=[this.trident.node.x,this.trident.node.y],t.tridentData=this.trident.getMapData(),t},r([u(a.default)],e.prototype,"trident",void 0),r([p],e)}(s.default);o.default=h,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0,"./Trident2":"Trident2"}],Pauper:[function(t,e,o){"use strict";cc._RF.push(e,"f02a2CVyZxOALXd3MC0LoOY","Pauper");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,c=t("../../../MainScene/Script/role/CollisComp"),a=t("../../../MainScene/Script/role/Role"),l=t("../../../Script/GameSpecial/GameEventType"),p=t("../../../Script/GameSpecial/GlobalEnum"),u=cc._decorator,h=u.ccclass,f=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisType=p.GlobalEnum.Collistype.goal,e.loopAnim=[s.daiji],e}return n(e,t),e.prototype.init=function(){this.initSkeleton(),this.playAnima(s.daiji)},e.prototype.reuse=function(){this.initSkeleton(),this.playAnima(s.daiji)},e.prototype.unuse=function(){},e.prototype.setData=function(){},e.prototype.reset=function(){},e.prototype.startAction=function(){this.customStep=this.dtUp},e.prototype.roleDie=function(){this.customStep=this.stepEmpty,this.playAnima(s.siwang),this.emit(l.EventType.DIYEvent.goalDie)},e.prototype.direcStone=function(t){var e=t.body.linearVelocity;e.lengthSqr()>=1e5&&e.y<-1e3&&this.roleDie()},e.prototype.onBeginContact=function(t,e,o){var i=o.node.getComponent(c.default);if(i)switch(i.collisType){case p.GlobalEnum.Collistype.smoke:case p.GlobalEnum.Collistype.magma:case p.GlobalEnum.Collistype.gas:case p.GlobalEnum.Collistype.foe:this.roleDie();break;case p.GlobalEnum.Collistype.stone:this.direcStone(o);break;case p.GlobalEnum.Collistype.player:this.playAnima(s.chenggong2)}},e.prototype.dtUp=function(){var t=this.node.getComponent(cc.RigidBody).linearVelocity;t.lengthSqr()>100?t.x<0?this.node.scaleX=-1:this.node.scaleX=1:this.playAnima(s.daiji)},r([h],e)}(a.default));o.default=f,function(t){t.chenggong1="chenggong1",t.chenggong2="chenggong2",t.siwang="siwang",t.daiji="daiji"}(s||(s={})),cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../MainScene/Script/role/Role":void 0,"../../../Script/GameSpecial/GameEventType":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0}],PlygonRender:[function(t,e,o){"use strict";cc._RF.push(e,"0d9ca90ZgdBEYxAngPSprCn","PlygonRender");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./PlygonSplitProgram"),c=cc.MeshBuffer,a=cc.renderer.InputAssembler,l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._texture=null,e.pointForWorld=[],e.UVPosForPoint=[],e.indexForPoint=[],e}return n(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.applyTexture())},enumerable:!1,configurable:!0}),e.prototype.applyTexture=function(){var t=this.getMaterial(0);t&&t.setProperty("texture",this.texture)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this._activateMaterial()},e.prototype.init=function(){},e.prototype.reset=function(){this.pointForWorld=[],this.UVPosForPoint=[],this.indexForPoint=[]},e.prototype.setData=function(t){t&&t.length>=3?(this.setRenderData(t),this.initVertexData()):(this.getRenderData(),this.initVertexData())},e.prototype._resetAssembler=function(){this.setVertsDirty(!0),this._assembler=new f,this._assembler.init(this)},e.prototype._activateMaterial=function(){var t=this.getMaterial(0);t?((t=cc.MaterialVariant.create(t,this)).setProperty("texture",this.texture),this.setMaterial(0,t),this.markForRender(!0)):this.disableRender()},e.prototype.initVertexData=function(){var t=this._assembler.getBuffer();t.reset(),t.request(this.pointForWorld.length,this.indexForPoint.length),this.fillUV(t),this.fillIndices(t),this.fillVertex(t),t.uploadData(),this._assembler._ia._count=this.indexForPoint.length},e.prototype.fillUV=function(t){for(var e=t._vData,o=t._uintVData,i=0;i<this.UVPosForPoint.length;i++)e[2+5*i]=this.UVPosForPoint[i].x,e[3+5*i]=this.UVPosForPoint[i].y,o[4+5*i]=this.node.color._val},e.prototype.fillIndices=function(t){for(var e=t._iData,o=0;o<this.indexForPoint.length;o++)e[o]=this.indexForPoint[o];var i=new Uint16Array(e.buffer,0,e.length);t._ib.update(0,i)},e.prototype.fillVertex=function(t){for(var e=t._vData,o=0;o<this.pointForWorld.length;o++)e[0+5*o]=this.pointForWorld[o].x,e[1+5*o]=this.pointForWorld[o].y;t._vb.update(0,e)},e.prototype.updateWorldVerts=function(t){this.node._updateWorldMatrix();var e=t._vData,o=this.local,i=this.node._worldMatrix;console.log(i.m);var n=i.m;n[0],n[1],n[4],n[5],n[12],n[13],o[0],o[2],o[1],o[3],e[0]=0,e[1]=0,e[5]=100,e[6]=0,e[10]=0,e[11]=100,e[15]=20,e[16]=20,t._vb.update(0,e)},e.prototype.setRenderData=function(t){this.setPointForWorld(t),this.getUVPos(),this.indexForPoint=s.default.process(this.pointForWorld)},e.prototype.setPointForWorld=function(t){for(var e=0;e<t.length;e++){var o=t[e];this.pointForWorld.push(this.node.convertToWorldSpaceAR(cc.v2(o[0],o[1])))}},e.prototype.getRenderData=function(){this.getPointforWorld(),this.getUVPos(),this.indexForPoint=s.default.process(this.pointForWorld)},e.prototype.getPointforWorld=function(){for(var t=this.node.children,e={},o=0;o<t.length;o++){var i=t[o];e[i.name]=i.convertToWorldSpaceAR(cc.v2())}for(o=0;o<t.length;o++)this.pointForWorld.push(e[o+1])},e.prototype.getUVPos=function(){for(var t=this.pointForWorld[0],e=cc.v2(this.texture.width,this.texture.height),o=0;o<this.pointForWorld.length;o++){var i=this.pointForWorld[o].sub(t),n=cc.v2(i.x/e.x,i.y/e.y);this.UVPosForPoint.push(n)}},r([u],e.prototype,"_texture",void 0),r([u({type:cc.Texture2D})],e.prototype,"texture",null),r([p],e)}(cc.RenderComponent);o.default=h;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._buffer=null,e._ia=null,e._vfmt=null,e}return n(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this._buffer=null,this._ia=null,this._vfmt=cc.gfx.VertexFormat.XY_UV_Color},e.prototype.getBuffer=function(){return this._buffer||(this._buffer=new c(cc.renderer._handle,this._vfmt),this._ia=new a,this._ia._vertexBuffer=this._buffer._vb,this._ia._indexBuffer=this._buffer._ib,this._ia._start=0,this._ia._count=0),this._buffer},e.prototype.fillBuffers=function(t,e){this._ia&&(e.node=t.node,e.material=t.getMaterial(0),e._flushIA(this._ia))},e}(cc.Assembler);cc.Assembler.register(h,f),cc._RF.pop()},{"./PlygonSplitProgram":"PlygonSplitProgram"}],PlygonSplitProgram:[function(t,e,o){"use strict";cc._RF.push(e,"355e6p5RVFAbof00o1+TU8D","PlygonSplitProgram"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./List"),n=function(){function t(){}return t.process=function(t){if(t.length<3)return[];this.pList=new i.default;for(var e=0,o=t.length;e<o;++e)this.pList.push(new r(e,t[e]));for(var n=this.pList.first,s=0;n;)this.updatePointStatus(n),n.value.isConvex||s++,n=n.next;if(0==s){var c=this.processConvexPlygon(t);return this.reset(),c}if(1==s){for(var a=0,l=this.pList.first;l.value.isConvex;)a++,l=l.next;var p=this.processSingleConcavePlygon(t,a);return this.reset(),p}var u=[];for(n=this.pList.first;this.pList.length>=3;){for(;n&&!n.value.isSeparable;)n=n.next;if(!n){for(n=this.pList.first;n&&!n.value.isSeparable;)n=n.next;if(!n){console.warn("\u591a\u8fb9\u5f62\u5206\u5272\u5c1a\u672a\u672a\u5b8c\u6210\uff0c\u4f46\u627e\u4e0d\u5230\u53ef\u5206\u5272\u9876\u70b9:",this.pList);break}}var h=n.prev?n.prev:this.pList.last,f=n.next?n.next:this.pList.first;u.push(h.value.pIndex,n.value.pIndex,f.value.pIndex),this.pList.removeNode(n),n.destroy(),this.updatePointStatus(h),this.updatePointStatus(f),n=f}return this.reset(),u},t.updatePointStatus=function(t){var e=t.prev?t.prev:this.pList.last,o=t.next?t.next:this.pList.first;if(!t.value.isConvex){if(!this.isConvex(t.value.point,e.value.point,o.value.point))return void(t.value.isSeparable=!1);t.value.isConvex=!0}for(var i=[e.value.point,t.value.point,o.value.point],n=this.pList.first;n;){if(!n.value.isConvex&&n!=t&&n!=e&&n!=o&&this.inTriangle(n.value.point,i))return void(t.value.isSeparable=!1);n=n.next}t.value.isSeparable=!0},t.processConvexPlygon=function(t){for(var e=[],o=1,i=t.length-1;o<i;++o)e.push(0,o,o+1);return e},t.processSingleConcavePlygon=function(t,e){if(0==e)return this.processConvexPlygon(t);for(var o=[],i=e,n=t.length-1,r=e+1;r<n;++r)o.push(i,r,r+1);i!==n&&o.push(i,n,0);var s=i-1;for(r=0;r<s;++r)o.push(i,r,r+1);return o},t.processMultilpeConcavePlygon=function(t){for(var e=[],o=t.first;t.length>=3;){for(;o&&!o.value.isSeparable;)o=o.next;if(!o){for(o=t.first;o&&!o.value.isSeparable;)o=o.next;if(!o){console.warn("\u591a\u8fb9\u5f62\u5206\u5272\u5c1a\u672a\u672a\u5b8c\u6210\uff0c\u4f46\u627e\u4e0d\u5230\u53ef\u5206\u5272\u9876\u70b9:",t);break}}var i=o.prev?o.prev:t.last,n=o.next?o.next:t.first;e.push(i.value.pIndex,o.value.pIndex,n.value.pIndex),t.removeNode(o),o.destroy(),this.updatePointStatus(i),this.updatePointStatus(n),o=n}return e},t.isConvex=function(t,e,o){return this.cross(this.sub(t,e),this.sub(o,t))>=0},t.inTriangle=function(t,e){var o=this.sub(e[1],e[0]),i=this.sub(e[2],e[0]),n=this.sub(e[2],e[1]),r=this.sub(t,e[0]),s=this.sub(t,e[1]),c=this.cross(o,i)>=0;return c!==this.cross(o,r)<0&&c!==this.cross(i,r)>=0&&this.cross(n,o)>0!=this.cross(n,s)>=0},t.reset=function(){this.pList&&(this.pList.reset(),this.pList=null)},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.sub=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},t.pList=null,t}();o.default=n;var r=function(t,e){this.point=null,this.isConvex=!1,this.isSeparable=!1,this.pIndex=t,this.point=e};cc._RF.pop()},{"./List":"List"}],Rock1:[function(t,e,o){"use strict";cc._RF.push(e,"c0d449sYRNMjb6W00QDOLPf","Rock1");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/GameSpecial/GlobalEnum"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=c.GlobalEnum.CollisGroup.ground,e.collisType=c.GlobalEnum.Collistype.ground,e.box=null,e}return n(e,t),e.prototype.init=function(){this.initBox()},e.prototype.setData=function(t){t.size&&(this.node.width=t.size[0],this.node.height=t.size[1]),t.angle&&(this.node.angle=t.angle),this.resetCollisDirecs(),this.updateWidget()},e.prototype.initBox=function(){this.box||(this.box=this.node.getComponent(cc.PhysicsBoxCollider))},e.prototype.resetCollisDirecs=function(){this.initBox(),this.box.size=cc.size(this.node.width,this.node.height),this.box.offset=cc.v2(0,0),this.box.apply()},e.prototype._getMapData=function(){var t={};return t.size=[this.node.width,this.node.height],t.angle=this.node.angle,t},r([l],e)}(s.default));o.default=p,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0}],Rock2:[function(t,e,o){"use strict";cc._RF.push(e,"e94bfP+hRpF0oyaN44PaCyd","Rock2");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/GameSpecial/GlobalEnum"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=c.GlobalEnum.CollisGroup.ground,e.collisType=c.GlobalEnum.Collistype.ground,e.box=null,e}return n(e,t),e.prototype.init=function(){this.initBox()},e.prototype.setData=function(t){t.size&&(this.node.width=t.size[0],this.node.height=t.size[1]),t.angle&&(this.node.angle=t.angle),this.resetCollisDirecs(),this.updateWidget()},e.prototype.initBox=function(){this.box||(this.box=this.node.getComponent(cc.PhysicsPolygonCollider))},e.prototype.resetCollisDirecs=function(){this.initBox(),this.box.points[0]=cc.v2(-this.node.width/2,-this.node.height/2),this.box.points[1]=cc.v2(this.node.width/2,-this.node.height/2),this.box.points[2]=cc.v2(this.node.width/2,this.node.height/2),this.box.offset=cc.v2(0,0),this.box.apply()},e.prototype._getMapData=function(){var t={};return t.size=[this.node.width,this.node.height],t.angle=this.node.angle,t},r([l],e)}(s.default));o.default=p,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0}],Smoke:[function(t,e,o){"use strict";cc._RF.push(e,"c1f69nT9U1JpbX4m9Au7w8x","Smoke");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Script/GameSpecial/GlobalEnum"),c=t("../FluidParticle"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisType=s.GlobalEnum.Collistype.smoke,e}return n(e,t),e.prototype.init=function(){},r([l],e)}(c.default));o.default=p,cc._RF.pop()},{"../../../Script/GameSpecial/GlobalEnum":void 0,"../FluidParticle":"FluidParticle"}],Stone:[function(t,e,o){"use strict";cc._RF.push(e,"4d557kgQodDS7Bwnt2bghq9","Stone");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Script/GameSpecial/GlobalEnum"),c=t("../FluidParticle"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisType=s.GlobalEnum.Collistype.stone,e}return n(e,t),e.prototype.init=function(){},r([l],e)}(c.default));o.default=p,cc._RF.pop()},{"../../../Script/GameSpecial/GlobalEnum":void 0,"../FluidParticle":"FluidParticle"}],TreasureBox:[function(t,e,o){"use strict";cc._RF.push(e,"7f24eaHJU1MQpGL90eM6Y96","TreasureBox");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../MainScene/Script/role/CollisComp"),c=t("../../Script/GameSpecial/GameEventType"),a=t("../../Script/GameSpecial/GlobalEnum"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=a.GlobalEnum.CollisGroup.role,e.collisType=a.GlobalEnum.Collistype.goal,e.lid=null,e.light=null,e}return n(e,t),e.prototype.init=function(){this.reset()},e.prototype.reuse=function(){},e.prototype.unuse=function(){this.reset()},e.prototype.reset=function(){this.light.active=!1,this.lid.setPosition(cc.v2(0,35))},e.prototype.setData=function(){},e.prototype.startAction=function(){},e.prototype.roleDie=function(){this.emit(c.EventType.DIYEvent.goalDie)},e.prototype.onBeginContact=function(t,e,o){var i=o.node.getComponent(s.default);if(i)switch(i.collisType){case a.GlobalEnum.Collistype.magma:this.roleDie();break;case a.GlobalEnum.Collistype.player:this.openBox()}},e.prototype.openBox=function(){this.lid.setPosition(cc.v2(0,45)),this.light.active=!0},e.prototype._getMapData=function(){return{}},r([u(cc.Node)],e.prototype,"lid",void 0),r([u(cc.Node)],e.prototype,"light",void 0),r([p],e)}(s.default);o.default=h,cc._RF.pop()},{"../../MainScene/Script/role/CollisComp":void 0,"../../Script/GameSpecial/GameEventType":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],Treasure:[function(t,e,o){"use strict";cc._RF.push(e,"26f69gM71BOTqZqpbcvp5PK","Treasure");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../MainScene/Script/role/CollisComp"),c=t("../../Script/Common/GlobalPool"),a=t("../../Script/GameSpecial/GlobalEnum"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=a.GlobalEnum.CollisGroup.role,e.collisType=a.GlobalEnum.Collistype.goal,e.gemParticle=[],e.particleNum=0,e.indexArr=[],e.particleName=[],e.particleType=[],e}return n(e,t),e.prototype.init=function(){this.initFluidPool()},e.prototype.reuse=function(){},e.prototype.unuse=function(){this.reset()},e.prototype.reset=function(){this.putAllIndexArr()},e.prototype.setData=function(t){t.particleNum&&(this.particleNum=t.particleNum),this.initFluidLiving()},e.prototype.startAction=function(){this.initFluidLiving()},e.prototype.putAllIndexArr=function(){if(this.indexArr.length>0){for(;this.indexArr.length>0;)c.default.put(this.indexArr.pop());this.indexArr=[]}},e.prototype.initFluidPool=function(){for(var t=0;t<this.gemParticle.length;t++)c.default.createPool(this.gemParticle[t].name,this.gemParticle[t],"Gem")},e.prototype.initFluidLiving=function(){this.initType(),this.arrangeFluid()},e.prototype.initType=function(){for(this.particleType=[],this.particleName=[];this.particleType.length<this.particleNum;){var t=Math.random();t<.5?this.particleType.push(0):t<.8?this.particleType.push(1):this.particleType.push(2)}this.particleName.push(this.gemParticle[0].name),this.particleName.push(this.gemParticle[1].name),this.particleName.push(this.gemParticle[2].name)},e.prototype.arrangeFluid=function(){for(var t=cc.v2(0,0),e=0;e<this.particleNum;e++){var o=c.default.get(this.particleName[this.particleType[e]]);this.node.addChild(o),o.setPosition(t),this.indexArr.push(o)}},e.prototype._getMapData=function(){var t={};return t.particleNum=this.particleNum,t},r([u([cc.Prefab])],e.prototype,"gemParticle",void 0),r([u({type:cc.Integer,displayName:"\u7c92\u5b50\u6570\u76ee",tooltip:"\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u6574\u6570\u7684\u5e73\u65b9\u53ef\u663e\u793a\u7684\u6574\u9f50\u4e00\u70b9"})],e.prototype,"particleNum",void 0),r([p],e)}(s.default);o.default=h,cc._RF.pop()},{"../../MainScene/Script/role/CollisComp":void 0,"../../Script/Common/GlobalPool":void 0,"../../Script/GameSpecial/GlobalEnum":void 0}],Trident1:[function(t,e,o){"use strict";cc._RF.push(e,"9d9389xubBBSYoLVaKVsM34","Trident1");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/Common/Action3dManager"),a=t("../../../Script/GameSpecial/GameEventType"),l=t("../../../Script/GameSpecial/GlobalEnum"),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=l.GlobalEnum.CollisGroup.ground,e.collisType=l.GlobalEnum.Collistype.needle,e.box=null,e.ismoving=!1,e.originPosY=null,e}return n(e,t),e.prototype.init=function(){this.initBox()},e.prototype.reset=function(){this.ismoving=!1,this.node.active=!0,this.node.angle=0},e.prototype.setData=function(t){t.pos&&this.node.setPosition(t.pos[0],t.pos[1]),this.resetCollisDirecs()},e.prototype.initBox=function(){this.box||(this.box=this.node.getComponent(cc.PhysicsBoxCollider))},e.prototype.resetCollisDirecs=function(){this.initBox(),this.box.size=cc.size(13,this.node.height),this.box.offset=cc.v2(0,0),this.box.apply(),this.node.getComponent(cc.RigidBody).syncPosition(!0),this.node.getComponent(cc.RigidBody).syncRotation(!0),console.log(this.node.getPosition())},e.prototype.update=function(){this.node.getComponent(cc.RigidBody).syncPosition(!0),this.node.getComponent(cc.RigidBody).syncRotation(!0)},e.prototype.move=function(t){this.ismoving||(this.ismoving=!0,this.level(t))},e.prototype.level=function(t){console.log("yidong"),this.emit(a.EventType.AudioEvent.playEffect,l.GlobalEnum.AudioClip.chouzhen),this.emit(a.EventType.SDKEvent.vibrateShort),this.originPosY=this.node.y;var e=c.default.moveBy(1,0,this.node.height/2),o=c.default.callFun(this.moveOver,this),i=c.default.sequence(e,o);c.default.getMng(c.ActionMngType.Level).runAction(t,i)},e.prototype.moveOver=function(){this.node.active=!1},e.prototype.goBack=function(){if(null!=this.originPosY){c.default.getMng(c.ActionMngType.Level).stopAllActions(this.node);var t=c.default.moveTo(.3,0,this.originPosY),e=c.default.callFun(this.moveFail,this),o=c.default.sequence(t,e);c.default.getMng(c.ActionMngType.Level).runAction(this.node,o)}},e.prototype.moveFail=function(){this.ismoving=!1},e.prototype.onBeginContact=function(t,e,o){var i=o.node.getComponent(s.default);i&&i.collisType==this.collisType&&this.goBack()},e.prototype._getMapData=function(){return{}},r([u],e)}(s.default));o.default=h,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/Common/Action3dManager":void 0,"../../../Script/GameSpecial/GameEventType":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0}],Trident2:[function(t,e,o){"use strict";cc._RF.push(e,"96013IZJixK4L3uU4uxllW5","Trident2");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/Common/Action3dManager"),a=t("../../../Script/GameSpecial/GameEventType"),l=t("../../../Script/GameSpecial/GlobalEnum"),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisGroup=l.GlobalEnum.CollisGroup.ground,e.collisType=l.GlobalEnum.Collistype.needle,e.box=null,e.ismoving=!1,e}return n(e,t),e.prototype.init=function(){this.initBox()},e.prototype.reset=function(){this.ismoving=!1},e.prototype.setData=function(t){t.pos&&this.node.setPosition(t.pos[0],t.pos[1]),t.data&&(t.data.height&&(this.node.width=12,this.node.height=t.data.height),t.data.angle&&(this.node.angle=t.data.angle)),this.resetCollisDirecs()},e.prototype.initBox=function(){this.box||(this.box=this.node.getChildByName("Trident").getComponent(cc.PhysicsBoxCollider))},e.prototype.resetCollisDirecs=function(){this.initBox(),this.box.size=cc.size(13,this.node.height+27),this.box.offset=cc.v2(0,0),this.box.apply(),this.node.getChildByName("Trident").getComponent(cc.RigidBody).syncPosition(!0),this.node.getChildByName("Trident").getComponent(cc.RigidBody).syncRotation(!0),console.log(this.node.getPosition())},e.prototype.move=function(t){this.ismoving||(this.ismoving=!0,this.level(t))},e.prototype.level=function(t){console.log("yidong"),this.emit(a.EventType.AudioEvent.playEffect,l.GlobalEnum.AudioClip.chouzhen),this.emit(a.EventType.SDKEvent.vibrateShort);var e=c.default.moveTo(1,t.x,t.y),o=c.default.callFun(this.moveOver,this),i=c.default.sequence(e,o);c.default.getMng(c.ActionMngType.Level).runAction(this.node,i)},e.prototype.moveOver=function(){this.ismoving=!1},e.prototype._getMapData=function(){var t={};return t.height=this.node.height,t.angle=this.node.angle,t},r([u],e)}(s.default));o.default=h,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/Common/Action3dManager":void 0,"../../../Script/GameSpecial/GameEventType":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0}],Water:[function(t,e,o){"use strict";cc._RF.push(e,"36858+yvE5L2IOv/VbRX8fv","Water");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../MainScene/Script/role/CollisComp"),c=t("../../../Script/GameSpecial/GameEventType"),a=t("../../../Script/GameSpecial/GlobalEnum"),l=t("../FluidParticle"),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisType=a.GlobalEnum.Collistype.water,e}return n(e,t),e.prototype.init=function(){},e.prototype.onBeginContact=function(t,e,o){var i=o.node.getComponent(s.default);i&&(i.collisType!=a.GlobalEnum.Collistype.magma&&i.collisType!=a.GlobalEnum.Collistype.stone||this.evaporation())},e.prototype.evaporation=function(){this.node.active&&this.emit(c.EventType.SceneChangeEvent.evaporation,this)},r([u],e)}(l.default));o.default=h,cc._RF.pop()},{"../../../MainScene/Script/role/CollisComp":void 0,"../../../Script/GameSpecial/GameEventType":void 0,"../../../Script/GameSpecial/GlobalEnum":void 0,"../FluidParticle":"FluidParticle"}]},{},["Faucet","FluidParticle","FluidRender","Gas","Magma","Smoke","Stone","Water","BossLevelScr","BossLevelScr1","BossLevelScr2","BossLevelScr3","BossLevelScr4","BossLevelScr5","BossLevelScr6","BossLevelScr7","BossLevelScr8","BossLevelScr9","BossUI","FinishAnim","Gem","LevelCamera","LevelManager","LevelUI","MainLevelScr","MainLevelScrText","MyLevelManager","Treasure","TreasureBox","Guard","Pauper","BackGround","Brick","Needle1","Needle2","Rock1","Rock2","Trident1","Trident2","List","PlygonRender","PlygonSplitProgram"]);